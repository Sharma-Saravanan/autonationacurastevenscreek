!function(a){"use strict";var e=function(){var e=window.DDC.recaptcha.captchaVersion||"",t=window.DDC.recaptcha.captchaSiteKey||"";if(!e||!t)return void DDC.log("error","window.DDC.recaptcha is not configured");var c=window.DDC.recaptcha.forms||[];if(0==c.length)return void DDC.log("info","no forms registered");if(window.DDC.isComposer)return void DDC.log("info","not loading reCAPTCHA in composer");if(window.DDC.recaptcha.captchaLoaded!==!0){if(window.DDC.recaptcha.captchaLoaded===!1)return;window.DDC.recaptcha.captchaLoaded=!1,DDC.log("info","loading reCAPTCHA library");var r="https://www.google.com/recaptcha/api.js?onload=recaptchaRefreshCallback";if("v2"==e)r+="&render=explicit";else if("v3"==e)r+="&render="+t;else if("enterprise"==e){var i;switch(window.DDC.recaptcha.locale){case"fr_CA":i="fr-CA";break;case"es_US":i="es";break;default:i="en"}r="https://www.google.com/recaptcha/enterprise.js?onload=recaptchaRefreshCallback&hl="+i+"&render="+t,"true"===window.DDC.recaptcha.recaptchaBadgeBottomLeft&&(r+="&badge=bottomleft")}var n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",r),n.setAttribute("async",""),n.setAttribute("defer",""),void document.body.appendChild(n)}c.forEach(function(c){try{var r=a('form[data-form-id="'+c.formUniqueId+'"]').last(),i=r.find('button[type="submit"]'),n=r.find('input[name="captchaToken"]'),o=r.find('input[name="captchaVersion"]');if(r.data("captchaLoaded"))return;c.captchaAction=c.captchaAction||"social";var d=function(){r.data("captchaState",null),"v2"==e&&(DDC.log("info","resetting captcha v2"),grecaptcha.reset(c.widgetId)),i.button("reset")},h=function(a){DDC.log("info","beginning captcha verification");var n=r.data("captchaState");if(n){if(n.hasToken&&Math.ceil(Date.now()-n.ts)<90)return;d()}a.preventDefault();var o=r.data("validator");o&&o.checkValidity()!==!0||(i.button("loading"),"v2"==e?(DDC.log("info","executing captcha v2"),grecaptcha.execute(c.widgetId)):"v3"==e?(DDC.log("info","executing captcha v3"),grecaptcha.execute(t,{action:c.captchaAction}).then(p)):"enterprise"==e&&(DDC.log("info","executing enterprise captcha"),grecaptcha.enterprise.execute(t,{action:c.captchaAction}).then(p)))},p=function(a){r.data("captchaState",{hasToken:!!a,ts:Date.now()}),a?(n.val(a),r.trigger(r.data("captchaValidateAction")||"submit")):d()};o.val(e),r.on("submit",h),r.on("recaptchaExecute",h),r.on("captchaReset",d),"v2"===e&&(c.widgetId=grecaptcha.render(c.captchaContainer,{sitekey:t,action:c.captchaAction,size:"invisible",badge:"inline",callback:p})),r.data("captchaLoaded",!0)}catch(D){DDC.log("error",D)}})};window.DDC=window.DDC||{},window.DDC.recaptcha=window.DDC.recaptcha||{forms:[]},window.DDC.recaptcha.refresh=e,window.recaptchaRefreshCallback=function(){window.DDC.recaptcha.captchaLoaded=!0,window.DDC.recaptcha.refresh()},window.DDC.recaptcha.refresh()}(jQuery);