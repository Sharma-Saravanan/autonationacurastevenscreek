!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e=e=>{let t=e;return t=t.replace(/^(tps-)/,""),t=t.replace(/^(cst-parse-)/,""),t=t.replace(/^(cst-)/,""),t=t.replace(/^(cw-)/,""),t},t=e=>{if(!e)return"Undefined";const t=["Web Integration API","Third Party Services API Full","Third Party Services API Compatible","Third Party Services API Hybrid","Third Party Services Velocity","Custom Work (cms-sites)"];return t.includes(e)?e:"wise"===e.toLowerCase()?t[0]:"api"===e.toLowerCase()?t[1]:"api_compatible"===e.toLowerCase()?t[2]:"hybrid"===e.toLowerCase()||e.startsWith("tps")?t[3]:"legacy"===e.toLowerCase()?t[4]:"custom"===e.toLowerCase()||e.startsWith("cw")||e.startsWith("cst")?t[5]:"Undefined"},i=e=>e&&"0"!==e&&"PLEASE_CALL"!==e&&parseInt(e.replace(" ","").replace("Â ","").replace("$","").replace(",","").trim(),10)||0,n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",i=e.toLowerCase();i=i.split(t);for(let e=0;e<i.length;e++)i[e]=i[e].charAt(0).toUpperCase()+i[e].slice(1);return i.join(" ")},a="data-location",o="Insert",s="Insert Call To Action",r="Modify Call To Action",l="Modify Links On Page",d="primary-banner",c="Restrictively Modify Call To Action",u="Update",h="vehicle-badge",p="vehicle-ctas",g="vehicle-media",m="vehicle-payments",y="vehicle-pricing",v=`${h}-custom`,w=`${p}-custom`,f=`${g}-custom`,b=`${m}-custom`,C=`${y}-custom`,P=()=>{var e;return null===(e=document.querySelector(".ddc-document"))||void 0===e||null===(e=e.classList)||void 0===e?void 0:e.contains("active")},I=e=>new Promise((t=>{const i=()=>{const n=document.querySelector(e);n?t(n):window.requestAnimationFrame(i)};i()})),D=()=>{const e="mobile-navbar/open",t='[data-location~="primary-menu"]';return new Promise((i=>{if(P)I(t).then((()=>i(!0))).catch((()=>i(!1)));else{var n;const a=async()=>{await I(t).then((()=>{var t;i(!0),null===(t=window.DDC)||void 0===t||null===(t=t.pubsub)||void 0===t||t.unsubscribe(e)})).catch((()=>i(!1)))};null===(n=window.DDC)||void 0===n||null===(n=n.pubsub)||void 0===n||n.subscribe(e,a)}}))},E=()=>new Promise((e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,{once:!0})})),T=async()=>{var e,t,i;return t=null===(e=window.DDC)||void 0===e||null===(e=e.PrivateAPI)||void 0===e?void 0:e.integrationsLoaded,i="WIAPILoaded",new Promise((e=>{t?e(t):window.addEventListener(i,(t=>{e(t)}),{once:!0})}))},A=()=>{const{accountId:e="",siteId:t="",defaultDomain:i=""}=window.DDC.siteSettings,{pageInfo:{pageName:n="",pagePath:a=""},attributes:{locale:o=""}}=window.DDC.dataLayer.page;return{account:e,siteId:t,defaultDomain:i,pageName:n,pagePath:a,locale:o}},S=(i,n)=>{if(100*Math.random()<=5&&window.newrelic){const a=n;"Failed"!==a.status&&(a.status="Success"),window.newrelic.addPageAction("WebIntegrationEvent",{integrationId:e(i.integrationId),integrationType:t(i.integrationType),integrationCategory:i.integrationCategory||"",placesInventoryContent:i.placesInventoryContent||!1,...a,...A()})}},L=e=>{const t=`${e}=`,i=document.cookie.split(";");for(let e=0;e<i.length;e++){let n=i[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null};let $;const k=async()=>{if(!Object.keys(window.DDC.dataLayer).length||!Object.keys(window.DDC.siteSettings).length)throw new Error("DDC DataLayer is not defined. Aborting Web Integration API.");if(!$){const{pageInfo:e,attributes:t}=window.DDC.dataLayer.page,{design:i,franchises:n}=window.DDC.dataLayer.site,{siteSettings:a}=window.DDC,o=e.isVlp,s=e.isVdp,r=e.isHomepage;$={accountId:a.accountId||"",siteId:a.siteId||"",defaultDomain:a.defaultDomain||"",indexPage:r,searchPage:o,detailPage:s,pageName:e.pageName||"",layoutType:t.layoutType||"",locale:t.locale||"",design:i,franchises:n,ga_clientId:L("_ga")||"",ga_visitorId:L("_gid")||""}}return $};var x,j,M,O;const N=null===(x=window)||void 0===x||null===(x=x.DDC)||void 0===x?void 0:x.Flags["wiapi-fetch-priority-js"],U=null===(j=window)||void 0===j||null===(j=j.DDC)||void 0===j?void 0:j.Flags["wiapi-fetch-priority-css"],F={fetchPriorityJS:!(!N||"false"===N)&&N,fetchPriorityCSS:!(!U||"false"===U)&&U,inlinePrimaryBanner:(null===(M=window)||void 0===M||null===(M=M.DDC)||void 0===M?void 0:M.Flags["wiapi-inline-primary-banner"])||!1,onlyCoxIntegrations:(null===(O=window)||void 0===O||null===(O=O.DDC)||void 0===O?void 0:O.Flags["enabled-wise-tps-integration-list"])||""},R=new Set,_=(e,t)=>(t||document).querySelector(e),q=(e,t)=>{const i=t||document;return Array.from(i.querySelectorAll(e))},W=async e=>{if("function"!=typeof e.querySelectorAll)return;const t=await k();var i;if("desktop"===t.layoutType){if(null!==(i=window.DDC)&&void 0!==i&&null!==(i=i.modules)&&void 0!==i&&i.dialog&&!window.DDC.modules.dialog.active&&jQuery(document).trigger("modulesRefresh",{modules:{dialog:window.DDC.modules.dialog}}),window.DDC.modules&&window.DDC.modules.popover){q('[data-toggle="popover"]',e).forEach((e=>{!0!==e.getAttribute("data-initialized")&&window.DDC.modules.popover.load(e)}))}}else if("mobile"===t.layoutType){var n;if("function"==typeof(null===(n=window)||void 0===n||null===(n=n.DDC)||void 0===n||null===(n=n.mobile)||void 0===n||null===(n=n.slidein)||void 0===n?void 0:n.init)){const t=q('.dialog, [data-toggle="popover"]',e);t.length>0&&t.forEach((e=>{window.DDC.mobile.slidein.init(e)}))}}},V=async(e,t,i)=>fetch(t,{headers:{Accept:"application/json"}}).then((n=>{if(!n.ok)throw e.integrationId&&S(e,{methodType:i,status:"Failed"}),new Error(`Error calling the endpoint at ${t}.`);return e.integrationId&&S(e,{methodType:i,status:"Success"}),0===n.size?{}:n.json()})),J=e=>window.DDC&&window.DDC.getUrlParams?(e&&S(e,{methodType:"getUrlParams",status:"Success"}),window.DDC.getUrlParams()):(e&&S(e,{methodType:"getUrlParams",status:"Failed"}),null),z=e=>{var t;const i=(null===(t=window)||void 0===t||null===(t=t.DDC)||void 0===t||null===(t=t.dataLayer)||void 0===t||null===(t=t.page)||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t.locale)||"en_US";let n;return"object"==typeof e?n=e[i]?e[i]:e.en_US:"string"==typeof e&&(n=e),n},H=()=>{var e,t,i;const{InvData:n,dataLayer:a}=null===(e=window)||void 0===e?void 0:e.DDC;if(!n)return!1;const{srpReady:o}=n,{pageInfo:s,inventory:r}=(null==n?void 0:n.inventory)||{},l=null===(t=window)||void 0===t||null===(t=t.DDC)||void 0===t||null===(t=t.WS)||void 0===t?void 0:t.state["ws-inv-data"];return n&&(!l||o)&&r&&(null==s?void 0:s.totalCount)>=0&&(!l||(null==a||null===(i=a.vehicles)||void 0===i?void 0:i.length)===r.length)},G=()=>{var e;const{InvData:t,dataLayer:i}=window.DDC;return!t&&(null==i||null===(e=i.vehicles)||void 0===e?void 0:e.length)>=0&&!document.querySelector(".inventory-listing-grid .hproduct")},B=()=>!!_(".inventory-listing-grid .hproduct"),K=()=>{var e;return null===(e=window)||void 0===e||null===(e=e.DDC)||void 0===e||null===(e=e.dataLayer)||void 0===e||null===(e=e.page)||void 0===e||null===(e=e.pageInfo)||void 0===e?void 0:e.isVdp},Y=()=>{var e;return null===(e=window)||void 0===e||null===(e=e.DDC)||void 0===e||null===(e=e.dataLayer)||void 0===e||null===(e=e.page)||void 0===e||null===(e=e.pageInfo)||void 0===e?void 0:e.isVlp},Q=()=>{var e;return Y()&&(null===(e=window)||void 0===e||null===(e=e.DDC)||void 0===e||null===(e=e.WS)||void 0===e?void 0:e.state["ws-inv-listing"])},X=e=>new Promise((t=>{if(!Y()&&!K())return void t(!0);let i;i=setInterval((()=>{let n;var a;"inv"===e?n=H()||G()||B():"facet"===e&&(n=(null===(a=window)||void 0===a||null===(a=a.DDC)||void 0===a||null===(a=a.InvData)||void 0===a||null===(a=a.facets)||void 0===a||null===(a=a.facets)||void 0===a?void 0:a.length)>0),n&&(clearInterval(i),t(!0))}),100)})),Z=()=>X("inv"),ee={passive:!0,once:!0,capture:!0},te=function(e){const t="object"==typeof e?e.integrationId:e;for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];window.DDC.integrationLog(t,...n)},ie=()=>{const e=J();return e&&"debug"===e._integrationMode},ne=()=>{const e=J();return e&&(ie()&&"trace"===e._integrationLogLevel||"trace"===e._integrationMode)};ie();const ae=ne(),oe=["[data-location]",".ws-tps-placeholder",".ddc-content"],se=(e,t,i)=>{const o=i.querySelectorAll?i.querySelectorAll("a"):[];[i,...o].forEach((e=>{const t=e.getAttribute?e.getAttribute("href"):e.href;!t||t.startsWith("/")&&!t.startsWith("//")||e.setAttribute("rel","nofollow")}));const s=(e=>{if(!e)return 0;let t,i,n=0;if(0===e.length)return n;const a=e.replace(/key=[0-9a-z%]+/gi,"").replace(/[^0-9a-z]/gi,"");for(t=0;t<a.length;t++)i=a.charCodeAt(t),n=(n<<5)-n+i,n|=0;return n})(i.outerHTML),r=t.closest("[data-location]").querySelectorAll(`[data-web-api-unique-hash="${s}"]`);return r.length>0?(te(`Already inserted content for ${e.integrationId}. Skipping.`),r):(i.setAttribute("data-web-api-unique-hash",s),i.setAttribute("data-web-api-inserted",!0),i.addEventListener&&i.addEventListener("click",(t=>{((e,t)=>{var i,o;if(!(e||t||null!==(i=window)&&void 0!==i&&null!==(i=i.DDC)&&void 0!==i&&i.fireTrackingEvent))return;const{srcElement:s}=t;let r=s;s.getAttribute("alt")||s.getAttribute("title")?r=s:s.closest("button")?r=s.closest("button"):s.closest("a")&&(r=s.closest("a"));let l=r.closest(`[${a}]`)?r.closest(`[${a}]`).getAttribute(a):"Unknown Location";"page-footer"===l&&(l="overlay-content");const d=r.getAttribute("aria-label")||r.textContent&&["BUTTON","A"].includes(r.tagName)?r.textContent:r.getAttribute("alt")||r.getAttribute("title")||"Third Party Content",c=null===(o=r.closest(".vehicle-card"))||void 0===o?void 0:o.getAttribute("data-uuid"),u={event:"thirdPartyUserEvent",product:e.integrationId,step:n(l.split(" ")[0],"-"),element:d,action:"clicked",result:"success",vehicleUuid:c};window.DDC.fireTrackingEvent(u)})(e,t)}),ee),t.appendChild(i),t.classList&&t.classList.remove("hide","hidden"),W(t),oe.forEach((e=>{const n=t.closest(e);n&&("primary-banner"===n.getAttribute("data-location")&&i.querySelector("img")&&i.querySelector("img").classList.add("align-center"),n.outerHTML&&n.outerHTML.includes("vehicle-media-container")&&(n.innerHTML="",n.appendChild(t)),n.classList.remove("hide","hidden"))})),S(e,{methodType:"Append",appendElement:i.tagName}),t)};class re{constructor(e){this.name=e,this.getElements=this.getElements.bind(this),this.getMeta=this.getMeta.bind(this),this.isReady=this.isReady.bind(this)}isReady(){return!0}async getElements(e){const t=`[data-location~="${this.name}"]`,i=null!=e&&e.uuid?document.querySelector(`[data-uuid="${e.uuid}"]`):document;if(!i)return[];const n=i.querySelectorAll(t);return 0===n.length&&ae&&te("WARNING",`The '${this.name}' location was targeted on this page but does not exist.`),n}async getConfig(){return{elementType:"div"}}prepareLocation(){return!0}getMeta(e){return null}}class le extends re{constructor(e){let{classes:t="",elementType:i="div",singleLocation:n=!1,clearContent:a=!1,placement:o="default"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.options={classes:t,elementType:i,singleLocation:n,clearContent:a,placement:o}}async getConfig(){return this.options}getMeta(){return k()}}const de=["askingPrice","internetPrice","msrp","oemPriceMapHighMSRP","retailValue","salePrice"],ce=(e,t)=>{if(t)return t;let i=e.toLowerCase();return"certified"===i||i.includes("pre")||i.includes("d'occasion")||"usado"===i?i="used":(i.includes("neuf")||"nuevo"===i)&&(i="new"),i},ue=(e,t)=>"certified"===e||"true"===t||!0===t||!1,he=(e,t)=>{const n=e;return n.highestPrice=n.highestPrice||0,n.startingPrice=n.startingPrice||0,n.finalPrice=n.finalPrice||0,de.forEach((e=>{const a=e.toLowerCase(),o=t[a]||t[e]||0,s=i(o);n[e]=s,s>n.highestPrice&&(n.highestPrice=s)})),n.startingPrice>n.highestPrice&&(n.highestPrice=n.startingPrice),n.finalPrice>n.highestPrice&&(n.highestPrice=n.finalPrice),0===n.finalPrice&&(n.startingPrice>0?n.finalPrice=n.startingPrice:n.highestPrice>0&&(n.finalPrice=n.highestPrice)),!n.startingPrice&&n.finalPrice&&(n.startingPrice=n.finalPrice),n},pe=async(e,t)=>(window.DDC.PrivateAPI=window.DDC.PrivateAPI||{},window.DDC.PrivateAPI.inventoryData&&0!==window.DDC.PrivateAPI.inventoryData.length||("responsive"===e?window.DDC.PrivateAPI.inventoryData=await(async e=>{var t;const n=window.DDC.dataLayer.vehicles||[],a=null!==(t=window.DDC)&&void 0!==t&&null!==(t=t.InvData)&&void 0!==t&&t.inventory?window.DDC.InvData.inventory.inventory:[],o=["accountId","address","autodataCaId","bodyStyle","certified","chromeId","classification","dealerCodes","doors","driveLine","engine","engineSize","exteriorColor","deliveryDateRange","fuelType","images","interiorColor","inventoryDate","inventoryType","make","model","modelCode","odometer","optionCodes","packageCode","stockNumber","transmission","trim","uuid","vin",...e],s={cityFuelEfficiency:"cityFuelEconomy",highwayFuelEfficiency:"highwayFuelEconomy"};return n.map((e=>{var t,n;const r={highestPrice:0,startingPrice:0,year:e.modelYear};o.forEach((t=>{if(void 0!==e[t]&&!r[t]){const i=e.inventoryType;r[t]="certified"===t?ue(i,e[t]):"inventoryType"===t?ce(i,e.newOrUsed):e[t]}})),r.status=e.status?e.status.replace(/ /g,"_").toLowerCase():"",Object.entries(s).forEach((t=>{e[t[0]]&&(r[t[1]]=e[t[0]])})),void 0!==e.link&&(r.link=`${window.location.origin}${e.link}`),(void 0===r.optionCodes||1===r.optionCodes.length&&""===r.optionCodes[0])&&(r.optionCodes=[]),r.images&&r.images.length>0&&r.images[0].uri&&(r.images=[r.images[0].uri]);const[l]=a.filter((e=>e.uuid===r.uuid&&e)),d=(null==l||null===(t=l.pricing)||void 0===t?void 0:t.dPrice)||(null==l||null===(n=l.pricing)||void 0===n?void 0:n.dprice);let c=!1;return l&&d&&(Object.entries(d).forEach((e=>{if(e.length<2)return;const t=e[1],n=t.typeClass;if(n&&(de.includes(n)||t.isFinalPrice)){const e="PLEASE_CALL"===t.value?0:i(t.value);e>0&&(e>r.highestPrice&&(r.highestPrice=e),de.includes(n)&&(r[n]=e),t.isFinalPrice&&r.highestPrice>0&&r.highestPrice/3<e&&(r.finalPrice=e),!1===c&&(r.startingPrice=e,c=!0))}})),!r.finalPrice&&r.startingPrice&&(r.finalPrice=r.startingPrice)),he(r,e)}))})(t):"legacy"===e?window.DDC.PrivateAPI.inventoryData=await(async e=>{const t=await k();if(!window.DDC.dataLayer)return[];const n=window.DDC.dataLayer.vehicles||[],a=t.detailPage&&n.length>0?[n[0]]:q("[data-uuid]"),o=[...de,"oemPriceMapHighMSRP","final-price","stackedFinal"];let s=[];return o.forEach((e=>{s.push(`.${e} .value`),s.push(`.${e} .price`),s.push(`.${e} .price-value`)})),s.push(".final-price .price"),s=s.join(", "),a.map((a=>{const r=[];let l,d,c,u,h=0,p=0,{uuid:g}=a;if(t.detailPage)c=_(".ws-detailed-pricing, .inventory-detail-pricing"),l=`${window.location.origin}${window.location.pathname}`;else if(t.searchPage&&_(".hproduct",a)){c=_(".hproduct",a),g=a.getAttribute("data-uuid");const e=_(".url",c);e&&e.href&&(l=e.href)}if(c&&"string"==typeof c.dealerCodes&&(c.dealerCodes=JSON.parse(c.dealerCodes)),n.length>0){if([u]=n.filter((e=>e.uuid===g&&e)),!u)return te("INFO",`No data found in data layer for vehicle UUID ${g}. Skipping.`),!1}else c&&(u=c);u.address&&u.accountName&&(u.address.accountName=u.accountName),u.images&&u.images.length>0&&r.push(u.images[0].uri),t.detailPage?d=q(s):t.searchPage&&c&&(d=q(s,c));let m=!1;d.length>0&&d.forEach((e=>{(e.parentElement&&e.parentElement.classList.length>0?Array.from(e.parentElement.classList):[]).forEach((t=>{if(o.includes(t)){const t=i(e.innerText);t&&!m&&(p=t,m=!0),(0===h||h>0&&h/3<t)&&(h=t)}}))}));const y=ue(u.inventoryType,u.certified),v=ce(u.inventoryType,u.newOrUsed),w={accountId:u.accountId||"",address:u.address||{},autodataCaId:u.autodataCaId||"",bodyStyle:u.bodyStyle||"",certified:y,chromeId:u.chromeId||"",cityFuelEconomy:parseInt(u.cityFuelEfficiency,10)||0,classification:u.classification||"",dealerCodes:"string"==typeof u.dealerCodes?JSON.parse(u.dealerCodes):u.dealerCodes||{},doors:u.doors||"",driveLine:u.driveLine||"",engine:u.engine||"",engineSize:u.engineSize||"",deliveryDateRange:u.deliveryDateRange||"",exteriorColor:u.exteriorColor||"",finalPrice:h,fuelType:u.fuelType||"",highwayFuelEconomy:parseInt(u.highwayFuelEfficiency,10)||0,images:r,interiorColor:u.interiorColor||"",inventoryDate:u.inventoryDate||"",inventoryType:v,link:l,make:u.make||"",model:u.model||"",modelCode:u.modelCode||"",odometer:parseInt(u.odometer,10)||0,oemSourcedMerchandisingStatus:a.oemSourcedMerchandisingStatus||"",optionCodes:u.optionCodesOther&&u.optionCodesOther.length?u.optionCodesOther:u.optionCodes||[],packageCode:u.packageCode||"",packages:u.packages?u.packages:"",startingPrice:p,status:u.status?u.status.replace(/ /g,"_").toLowerCase():"",stockNumber:u.stockNumber||"",transmission:u.transmission||"",trim:u.trim||"",uuid:u.uuid||"",vin:u.vin||"",year:parseInt(u.modelYear,10)||0},f=e.reduce(((e,t)=>({...e,[t]:u[t]||""})),w);return he(f,u)}))})(t):"grid"===e&&(window.DDC.PrivateAPI.inventoryData=await(async e=>(await k()).searchPage&&0!==q(".inventory-listing-grid").length?q("[data-uuid]").map((t=>{const n=t.dataset,a=[],o=_(".url",t),s=o&&o.href?o.href:"";let r=0,l=0,d=0;const c=q(".image-wrap img",t);if(c.length>0){const e=c[0];e.getAttribute("data-src")?a.push(e.getAttribute("data-src").split("?")[0]):e.src&&a.push(e.src.split("?")[0]),n.images=a}if(!n)return te("INFO","Vehicle data not found. Aborting inventory events."),!1;if(t.querySelectorAll){const e=q(".detailed-pricing .value, .gv-pricing .value",t);let n=!1;e.forEach((e=>{if(null===e.offsetParent||e.parentElement.classList.contains("stackedConditionalRebate")||e.parentElement.classList.contains("stackedConditionalFinal"))return;const t=i(e.innerText);t&&(t>r&&(r=t),n||(l=t,n=!0),(e.parentElement.classList.contains("stackedFinal")||e.parentElement.classList.contains("finalPrice"))&&(d=t))}))}const u="string"==typeof n.dealercodes?n.dealercodes.replace("{","").replace("}","").split(",").map((e=>e.split("=").map((e=>e.trim())))).reduce(((e,t)=>{let[i,n]=t;return e[i]=n,e}),{}):{},h="string"==typeof n.optioncodes?n.optioncodes.replace(/[[\]\s]/gi,"").split(","):[],p=ue(n.type,t.certified),g=ce(n.type,null),m={accountId:n.accountid||"",address:n.address||{},autodataCaId:n.autodatacaid||"",bodyStyle:n.bodystyle||"",certified:p,chromeId:n.chromeid||"",cityFuelEconomy:parseInt(n.cityfueleconomy,10)||0,classification:n.classification||"",dealerCodes:u,doors:n.doors||"",driveLine:n.driveline||"",engine:n.engine||"",engineSize:n.enginesize||"",deliveryDateRange:n.deliveryDateRange||"",exteriorColor:n.exteriorcolor||"",finalPrice:d,fuelType:n.fueltype||"",highwayFuelEconomy:parseInt(n.highwayfueleconomy,10)||0,highestPrice:r,images:a,interiorColor:n.interiorcolor||"",inventoryDate:n.inventorydate||"",inventoryType:g,link:s,make:n.make||"",model:n.model||"",modelCode:n.modelcode||"",odometer:parseInt(n.odometer,10)||0,oemSourcedMerchandisingStatus:n.oemSourcedMerchandisingStatus||"",optionCodes:h,packageCode:n.packagecode||"",packages:n.packages?n.packages:"",startingPrice:l,status:n.status?n.status.replace(/ /g,"_").toLowerCase():"",stockNumber:n.stocknumber||"",transmission:n.transmission||"",trim:n.trim||"",uuid:n.uuid||"",vin:n.vin||"",year:parseInt(n.year,10)||0},y=e.reduce(((e,t)=>({...e,[t]:n[t]||""})),m);return he(y,n)})):(te("INFO","Not a grid view inventory page. Skipping further inventory processing."),!1))(t))),window.DDC.PrivateAPI.inventoryData),ge=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return await Z(),H()?pe("responsive",e):G()?pe("legacy",e):B()?pe("grid",e):[]},me=async e=>{const t=await k();if(!t.searchPage&&!t.detailPage)return[];const i=await ge();return S(e,{methodType:"getVehicleData",status:"Success"}),i},ye=async(e,t)=>{const i=[];return(await ge()).forEach((e=>{e[t]&&i.push(e[t])})),e&&S(e,{methodType:"getAttributeForVehicles",status:"Success"}),i};class ve extends le{isReady(){return Z()}getMeta(e){return(async e=>{const t=await k(),i=await ge(),n=window.DDC.dataLayer.vehicles||[],a=t.detailPage&&n.length>0?n[0].uuid:e.closest("[data-uuid]").getAttribute("data-uuid"),o=i.filter((e=>e.uuid===a&&e));return o.length>0?o[0]:null})(e)}}const we="vehicle-card-badge badge hidden";class fe extends ve{async getConfig(){return{classes:`${we} m-3 p-0`,elementType:"li",gridSrpClasses:`${we} align-center m-0 p-3`,responsiveSrpClasses:`${we} m-2 py-3`,vdpClasses:`${we} align-center`}}}class be extends re{constructor(e){super(e),this.name=e}isReady(){return Z()}async getConfig(){return{singleLocation:!0}}getMeta(){return k()}}class Ce extends ve{async getConfig(){return{classes:"badge m-0 mt-3",elementType:"li",gridSrpClasses:"badge m-0",placement:"first",responsiveSrpClasses:"m-0 mb-3 px-3",vdpClasses:"m-0"}}}const Pe="listings-placeholder",Ie="listings-ad",De=Object.freeze({content:new le("content"),"digital-retailing":new ve("digital-retailing"),"facet-browse":new le("facet-browse"),"header-toolbar":new class extends re{async getConfig(){const e=await k(),t={elementType:"div"},i=document.querySelector(".responsive-centered-nav");return"desktop"===e.layoutType&&(t.classes="d-flex flex-column justify-content-center align-items-end navbar",i&&(t.classes=`${t.classes} m-4`)),t}prepareLocation(){const e=document.querySelector('\n\t\t\t[data-widget-id="template-navbar1"] .navbar-inner\n\t\t');if(!e)return;const t=e.querySelectorAll("\n\t\t\t.ddc-btn-nav,\n\t\t\tdiv.ddc-btn-wiapi\n\t\t");e.className=e.className.replace(new RegExp(/navbar-inner-count-\d/,"g"),""),e.classList.add(`navbar-inner-count-${t.length.toString()}`)}getMeta(){return k()}}("header-toolbar"),heading:new le("heading"),"listing-filters":new be("listing-filters"),"listings-placeholder-1":new be(`${Pe}-1`),"listings-placeholder-2":new be(`${Pe}-2`),"listings-placeholder-3":new be(`${Pe}-3`),"listings-placeholder-4":new be(`${Pe}-4`),"listings-placeholder-5":new be(`${Pe}-5`),"listings-ad-1":new be(`${Ie}-1`),"listings-ad-2":new be(`${Ie}-2`),"listings-ad-3":new be(`${Ie}-3`),"mobile-vdp-footer":new ve("mobile-vdp-footer",{elementType:"li",clearContent:!0}),"primary-menu-top":new le("primary-menu-top",{classes:"panel panel-default",elementType:"li",singleLocation:!0,placement:"first"}),"primary-menu-bottom":new le("primary-menu-bottom",{classes:"panel panel-default",elementType:"li",singleLocation:!0}),"page-footer":new le("page-footer"),"primary-banner":new le("primary-banner",{classes:"mt-3 px-4"}),"privacy-form":new le("privacy-form",{clearContent:!0,singleLocation:!0}),"search-facet-pricing":new class extends re{constructor(e){super(e||"search-facet")}isReady(){return X("facet")}async getConfig(){return{classes:"facet m-0 mt-3",elementType:"div",responsiveSrpClasses:"m-0 mb-3 px-3",singleLocation:!0}}getMeta(){return k()}}("search-facet-pricing"),"secondary-content":new le("secondary-content"),"site-text-search":new le("site-text-search"),"vehicle-badge":new fe("vehicle-badge"),"vehicle-badge-custom":new fe("vehicle-badge-custom"),"vehicle-build-offer":new ve("vehicle-build-offer",{classes:"mb-3"}),"vehicle-ctas":new ve("vehicle-ctas",{classes:"mb-3"}),"vehicle-ctas-bottom":new ve("vehicle-ctas-bottom",{classes:"mb-3"}),"vehicle-ctas-custom":new ve("vehicle-ctas-custom",{classes:"mb-3"}),"vehicle-ctas-top":new ve("vehicle-ctas-top",{classes:"mb-3"}),"vehicle-media":new Ce("vehicle-media"),"vehicle-media-container":new ve("vehicle-media-container"),"vehicle-media-custom":new Ce("vehicle-media-custom"),"vehicle-payments":new ve("vehicle-payments",{classes:"mb-3",singleLocation:!0}),"vehicle-payments-primary":new ve("vehicle-payments-primary",{classes:"mb-3",singleLocation:!0}),"vehicle-payments-custom":new ve("vehicle-payments-custom",{classes:"mb-3",singleLocation:!0}),"vehicle-pricing":new ve("vehicle-pricing",{classes:"mb-3"}),"vehicle-pricing-custom":new ve("vehicle-pricing-custom",{classes:"mb-3"})}),Ee=["ask","drive"],Te=[],Ae=["x-time","schedule-service","quote-build","value-a-trade","payment-search","pre-approval"],Se={},Le={};["chat","check-availability","delivery","digital-retailing","eprice","location-finder","payment-calculator","pre-approval","request-a-quote","reserve-it-now","send-to-phone","social","test-drive","text-us","value-a-trade","window-sticker"].forEach((e=>{const t=`vehicle-${e}-button`;Se[t]=new ve(t)})),Ee.forEach((e=>{const t=`vehicle-${e}-button`;Te.push(t),Le[t]=new ve(t)}));const $e=Object.freeze({...Se,...Le}),ke=Object.keys(De),xe=Object.keys(Se),je=Object.keys(Le),Me=Q(),Oe=(e,t)=>("object"==typeof t&&Object.keys(t).forEach((i=>{i&&e.setAttribute(i,t[i])})),e),Ne=(e,t,i)=>(t.classList.remove("hidden"),e.init&&e.init.integrationId&&t.setAttribute("data-modified-by",e.init.integrationId),t.setAttribute("data-content-source","Web Integration API"),e.targetLocation&&t.setAttribute("data-content-intent",e.targetLocation),e.destinationLocation&&t.setAttribute("data-content-destination",e.destinationLocation),i&&t.setAttribute("data-location",i),t),Ue=function(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=!e.destinationLocation||!Te.includes(e.destinationLocation);let s=t.parentNode?t.cloneNode(!0):t;t.parentNode&&t.parentNode.replaceChild(s,t);const r=z(i.text);if(i.href?s.href=i.href:i.src?s.href=i.src:(s.removeAttribute("href"),s.removeAttribute("data-href")),i.style&&"string"==typeof i.style&&(s.style=i.style.trim()),n&&o&&(s.classList.add("btn","btn-block"),Me&&s.classList.add("btn-sm"),s.classList.remove("btn-default","btn-primary")),i.imgSrc){s.innerHTML="";let e=document.createElement("img");e.src=i.imgSrc,e.alt=i.imgAlt?z(i.imgAlt):r,i.imgClasses&&(e.className=i.imgClasses),e=Oe(e,i.imgAttributes),s.appendChild(e)}else r&&(s.innerHTML=r,s.setAttribute("alt",r),n&&o&&("primary"===i.type||"text"===i.type?s.classList.add(`btn-${i.type}`):s.classList.add("btn-default")));if(i.onclick&&s.addEventListener("click",i.onclick),i.target&&s.setAttribute("target",i.target),["data-width","data-dialog-class"].forEach((e=>{s.removeAttribute(e)})),s=Oe(s,i.attributes),["dialog","hide","hidden"].forEach((e=>{s.classList.remove(e)})),i.classes&&""!==i.classes.trim()&&i.classes.trim().split(" ").forEach((e=>{s.classList.add(e)})),a&&(s=Ne(e,s)),i.popover){const e={toggle:"popover",animation:i.popover.animation||!0,container:i.popover.container||"body","delay-show":i.popover.delayShow||0,"delay-hide":i.popover.delayHide||0,title:z(i.popover.title)||"",content:z(i.popover.content)||"",html:i.popover.html||"",placement:i.popover.placement||"left",trigger:i.popover.trigger||"hover"};Object.keys(e).forEach((t=>{s.setAttribute(`data-${t}`,e[t])}))}return s};class Fe{constructor(){this.data={},this.push=this.push.bind(this),this.forEach=this.forEach.bind(this),this.ensureListForKey=this.ensureListForKey.bind(this),this.clear=this.clear.bind(this)}push(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.ensureListForKey(e).push(...i)}forEach(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.ensureListForKey(e).forEach(...i)}ensureListForKey(e){return void 0===this.data[e]&&(this.data[e]=[]),this.data[e]}clear(){this.data={}}}const Re=Object.freeze({"schedule-service":new class extends re{constructor(){super("page-schedule-service-button")}}}),_e=Object.keys(Re),qe=(e,t)=>{if("string"!=typeof e||0===e.length)throw new Error(`${t} must be a non-zero length string. Got: ${e}.`)},We=(e,t)=>{if(!e||"object"!=typeof e)throw new Error(`${t} must be an object. Got: ${e}.`)},Ve=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;const n=Object.keys(e),a=[];if(!n.every((e=>{const i=t.indexOf(e)>=0;return i||a.push(e),i})))throw new Error(`Found the following invalid props '${a.join(", ")}'. Only the following props are allowed '${t.join(", ")}', in ${i}.`)},Je=(e,t)=>{We(e,t),qe(e.integrationId,"integrationId"),qe(e.integrationType,"integrationType")};class ze{constructor(e,t){Je(e,"init"),this.init=e,this.callback=t}}const He=new Fe,Ge=new Fe,Be=(e,t,i)=>{try{t((n=i,JSON.parse(JSON.stringify(n))))}catch(t){te(`Callback failed: ${e} ${JSON.stringify(i)}.`,t)}var n},Ke=["vehicle-media"],Ye=["image","html"],Qe=["primary","secondary","last"],Xe=["insert","replace"],Ze={"vehicle-media":{}},et=new Set,tt=e=>{if(!Ke.includes(e))throw new Error(`Unsupported gallery: '${e}'. Expected one of: ${Ke.join(", ")}.`)},it=(e,t)=>{if(!t)throw new Error(`Unsupported request. ${e} is a required field.`)},nt=window._.debounce((e=>{const t={vin:e,content:Ze["vehicle-media"][e]};window.dispatchEvent(new CustomEvent("wiapiVehicleMediaUpdated",{detail:t}))}),100),at=window._.debounce((()=>{window.dispatchEvent(new CustomEvent("wiapiAllVehiclesMediaUpdated",{detail:{content:Ze["vehicle-media"]}}))}),100),ot=(e,t)=>{e.forEach((e=>{const{vin:i,images:n,insertMethod:a="insert"}=e;it("vin",i),it("images",n),(e=>{if(!Xe.includes(e))throw new Error(`Unsupported vehicle media content insertMethod: '${e}'. Expected one of: ${Xe.join(", ")}.`)})(a);const o=t.find((e=>e.vin===i));Ze["vehicle-media"][i]=Ze["vehicle-media"][i]||Qe.reduce(((e,t)=>(e[t]=[],e)),{}),Ze["vehicle-media"][i].insertMethod=a,Ze["vehicle-media"][i].vehicle=o,n.forEach((e=>{const{type:t,position:n,src:a,thumbnail:o="",html:s,trigger:r="click",callback:l}=e;if((e=>{if(!Ye.includes(e))throw new Error(`Unsupported vehicle media content type: '${e}'. Expected one of: ${Ye.join(", ")}.`)})(t),(e=>{if(!Qe.includes(e))throw new Error(`Unsupported vehicle media position: '${e}'. Expected one of: ${Qe.join(", ")}.`)})(n),Ye.includes(t)){const e=`${i}${n}${a}`;let d="";if(!a||""===a.trim())throw d="Vehicle media images must have a 'src' property.",S(init,{methodType:"insertVehicleMedia",status:"Failed",message:d}),new Error(d);if("html"===t&&(!s&&!l||s&&""===s.trim()&&!l))throw d="Vehicle media HTML must have an 'html' property with content.",S(init,{methodType:"insertVehicleMedia",status:"Failed",message:d}),new Error(d);et.has(e)||Ze["vehicle-media"][i][n].push({vin:i,type:t,src:a,thumbnail:o&&""!==o.trim()?o:a,position:n,html:s,trigger:r,callback:l}),et.add(e)}})),nt(i)})),at()},st=e=>{const t=document.createElement("template"),i=e.trim();return t.innerHTML=i,t.content.firstChild};let rt=!1;const lt=e=>e.includes("{")&&e.includes("}"),dt=(e,t)=>{let i=e;return Object.keys(t).forEach((e=>{if("integrationUrl"!==e&&i.includes(`{${e}}`)){const n=new RegExp(`{${e}}`,"g");i=i.replace(n,t[e])}})),i},ct=async()=>{if(!rt){const e=await k(),{layoutType:t,pageName:i,siteId:n,locale:a}=e,o="/api/ipp/config/services",s=[`integrationType=${["api","api_compatible"].join(",")}`,`deviceType=${t}`,`pageAlias=${i}`,`siteId=${n}`,`locale=${a}`],r=J();"false"!==(null==r?void 0:r._toggleBasePageCache)&&"false"!==(null==r?void 0:r._toggleWIAPICache)||s.push(`r=${(new Date).getTime()}`),rt=V({},`${o}?${s.join("&")}`,"loadConfigs")}return rt},ut=async(e,t,i)=>{const n=await ct();S(e,{methodType:t,status:"Success"});const a=(o=[e.integrationId,...i],s=n,o.reduce(((e,t)=>e&&e[t]?e[t]:null),s));var o,s;return null===a?{}:a},ht=async e=>ut(e,"getContentMappings",["contentMappings"]),pt=async function(t){var i;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=null===(i=window)||void 0===i||null===(i=i.DDC)||void 0===i||null===(i=i.Integration)||void 0===i?void 0:i.settings;if(o){const i=await(async t=>{const{settings:i}=window.DDC.Integration;return Object.keys(i).forEach((t=>{e(t)!==t&&(i[e(t)]=i[t],delete i[t])})),void 0!==i[t.integrationId]&&(S(t,{methodType:"getConfigDeprecated",status:"Success"}),i[t.integrationId])})(t);if(!1!==i)return i}try{const e=await ct(),i=await async function(e,t,i,n){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o="object"==typeof i&&(ie()||ne()),s=J();if(t[e.integrationId]){if(o&&"override"===s._integrationConfig)return i;const n=t[e.integrationId].fields,r=await k(),{layoutType:l}=r;if(!t[e.integrationId].wiseIntegration){const t="mobile"===l&&!0===n.enabledSeamless,i="desktop"===l&&!0===n.enabledDesktop;if(!t&&!i)throw a&&S(e,{methodType:"getConfig",status:`Disabled for ${l}`}),new Error(`Config for ${e.integrationId} found but not enabled for the current device type.`)}const d=["includedPages","excludedPages","thirdPartyServiceDebug"],c={srp:"searchPage",vdp:"detailPage",index:"indexPage"},u=Object.keys(n).filter((e=>!d.includes(e)&&!e.startsWith("enabled")&&!e.startsWith("addTo"))).reduce(((t,i)=>{const a=t;if(i.split("-").length>1){const[t,o]=i.split("-");r[c[o]]&&(ne()&&te(e.integrationId,`Using override key '${i}' to set field '${t}' to '${n[i]}' for '${c[o]}'.`),a[t]=n[i])}else i in a||(a[i]=n[i]);return a}),{});return a&&S(e,{methodType:"getConfig",status:"Success"}),u}{if(o)return i;a&&S(e,{methodType:"getConfig",status:"Not Found"});const s=n?[...Object.keys(t),...Object.keys(window.DDC.Integration.settings)]:Object.keys(t),r=s.length?`Integration configs are available only for the following -> ${[...new Set(s)].join(", ")}`:"";throw new Error(`Config for ${e.integrationId} not found. ${r}`)}}(t,e,n,o,a);if(i)return i}catch(e){a&&S(t,{methodType:"getConfig",status:"Failed",message:e}),te(t,`Error calling getConfig. ${e}`)}return null},gt=(e,t,i)=>{void 0===window.DDC.PrivateAPI&&(window.DDC.PrivateAPI={}),void 0===window.DDC.PrivateAPI.timings&&(window.DDC.PrivateAPI.timings={}),void 0===window.DDC.PrivateAPI.timings[e]&&(window.DDC.PrivateAPI.timings[e]={}),void 0===window.DDC.PrivateAPI.timings[e][t]&&(window.DDC.PrivateAPI.timings[e][t]=[]),window.DDC.PrivateAPI.timings[e][t].push(i)};class mt extends re{constructor(e){super(),this.locations=e}getMeta(){return k()}async getElements(){return this.locations}}const yt=[h,p,g,m,y];class vt{constructor(e,t,i,n,a,o,s){const d=o||n;Je(e,"init"),((e,t)=>{let i=ke;if(e===u&&(i=xe),e===r&&(i=[...xe,...ke]),e===c&&(i=je),e===l&&(i=Ae),!i.includes(t))throw new Error(`Invalid location: ${t}. Valid options are: ${i.join(", ")}.`)})(i,d),this.uniqueId=(()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+e()+e()})(),this.init=e,this.methodType=i,this.targetLocation=d,this.destinationLocation=null,this.defaultLocation=n,this.type=a,this.integrationCall=s,this.getInsertSite=this.getInsertSite.bind(this),this.apply=this.apply.bind(this),this.timingKey=`${this.init.integrationId}-${this.targetLocation}`}async getInsertSite(e,t){if(null!=t&&t.singleLocation){const i=[`[data-web-api-id="${this.init.integrationId}"]`];null!=t&&t.placement&&i.push(`[data-web-api-placement="${t.placement}"]`);const n=null==e?void 0:e.querySelector(i.join(""));if(n)return n}const i=null!=t&&t.elementType?t.elementType:"div",n=document.createElement(i);n.setAttribute("data-web-api-id",this.init.integrationId),null!=t&&t.placement&&n.setAttribute("data-web-api-placement",t.placement),n.setAttribute("data-web-api-unique-id",this.uniqueId);let a="",o="";if(t&&(t.style&&n.setAttribute("style",t.style),t.responsiveSrpClasses&&H()?o=`${t.responsiveSrpClasses}`:t.gridSrpClasses&&B()?o=`${t.gridSrpClasses}`:t.vdpClasses&&K()?(a=`${a} p-4`,null!=e&&e.getAttribute("data-list-classes")&&(a=null==e?void 0:e.getAttribute("data-list-classes")),o=`${t.vdpClasses}`):t.classes&&(o=`${t.classes}`),n.setAttribute("class",`${o} ${a} hidden`)),null!=t&&t.clearContent)for(;null!=e&&e.firstChild;)e.removeChild(e.firstChild);return null!=t&&t.placement&&"first"===(null==t?void 0:t.placement)&&null!=e&&e.firstChild?e.insertBefore(n,e.firstChild):null==e||e.appendChild(n),n}async apply(e,t){const i=Date.now(),n=await pt(this.init,!1,!1);null!=n&&n.useCustomInsertLocations&&yt.includes(this.targetLocation)&&!this.targetLocation.endsWith("-custom")&&(this.targetLocation=`${this.targetLocation}-custom`);let a=null;if(this.methodType===r||this.methodType===c){const e=await ht(this.init),t=e.buttons||e.button;t&&Object.entries(t).forEach((e=>{const[t,i]=e;t===this.targetLocation&&i&&(a=$e[i]?$e[i]:new ve(i),this.destinationLocation=i)})),await Z(),a&&("hidden"===a.name||document.querySelector(`[data-location="${a.name}"]`))||(a=De[this.defaultLocation],this.methodType=s)}else if(this.methodType===s)a=De[this.defaultLocation];else if(this.methodType===o)a=De[this.targetLocation];else if(this.methodType===u)a=$e[this.targetLocation];else if(this.methodType===l){const e=((await ht(this.init)).links||{})[this.targetLocation]||[];if(e&&e.length){const t=e.map((e=>document.querySelectorAll(`a[href^="${e}"]`))).filter((e=>e.length)).reduce(((e,t)=>[...e,...t]),[]);t.length&&(a=new mt(t))}}if(!a)return;await a.isReady();const d=await a.getElements(e),h=await a.getConfig();setTimeout((()=>{d&&d.forEach((async d=>{try{var p,g;const m=await a.getMeta(d),v=!(!t||!e||(null==e?void 0:e.uuid)!==(null==m?void 0:m.uuid))||!e,w=0===(null==d||null===(p=d.querySelectorAll(`[data-web-api-unique-id="${this.uniqueId}"]`))||void 0===p?void 0:p.length);if(!v||!w)return;if(await a.prepareLocation(d),this.methodType===s||this.methodType===r||this.methodType===c||this.methodType===l){const e=this.integrationCall(m);if("object"!=typeof e)return;{let t=e;if(this.methodType===c||this.methodType===l){const{href:i,target:n,onclick:o,popover:s,attributes:r,...c}=e;t={href:i,target:n,onclick:o,popover:s,attributes:r};const u=Object.keys(c||{});if(u.length){const e=u.join(", ");te(this.init.integrationId,`tried to modify the following button attributes ${e} of ${a.name} which is not allowed.`)}const h=Ue(this,d,t,this.methodType!==l);W(h)}else if(this.methodType===s){const e=document.createElement("a");se(this.init,await this.getInsertSite(d,h),Ue(this,e,t)),W(e)}else if(this.methodType===r){let e;const i="A"===d.nodeName;i&&(e=await this.getInsertSite(null,h),d.parentNode.appendChild(e),e=Ne(this,e,d.getAttribute("data-location")),d.getAttribute("data-location")&&d.removeAttribute("data-location"));const n="BUTTON"===d.nodeName;let a;n&&(a=document.createElement("a"),d.replaceWith(a));const o=Ue(this,i?d:n?a:d.querySelector("a"),t,!0,!i);e&&e.appendChild(o),W(o)}}}else if(this.methodType===o){(null==n?void 0:n.renderAsFirstChild)&&a.name===y&&(h.placement="first"),this.integrationCall(await this.getInsertSite(d,h),m)}else this.methodType===u&&(te("WARNING: The `API.update` method is deprecated and will soon be removed. Please use `API.insertCallToAction` instead. For details, please visit https://dealerdotcom.github.io/web-integration-api-docs/#api-insertcalltoaction-type-intent-setupfunction-meta"),this.integrationCall(d,m));const f=d.closest("[data-location]");null==f||null===(g=f.classList)||void 0===g||g.remove("hide","hidden"),S(this.init,{methodType:this.methodType,status:"Success",locationName:this.targetLocation});const b=Date.now();gt(this.methodType,this.timingKey,b-i)}catch(e){const t=Date.now();te(this.init.integrationId,`Failed to edit into ${this.targetLocation} and took ${t-i}ms to fail... ${e}`),S(this.init,{methodType:this.methodType,status:"Failed",locationName:this.targetLocation,message:e})}}))}),0)}}const wt=new Set,ft="listings-placeholder";let bt=null;const Ct=()=>{if(bt)return bt;const e=`[data-location*="${ft}"]`,t=document.querySelectorAll(e),i=new Map;return t.forEach((e=>{const t=e.getAttribute("data-location"),n=i.get(t)||[];i.set(t,[...n,e])})),i},Pt=e=>!(null==e||!e.includes(ft)),It=e=>wt.has(e),Dt=e=>"mywallet"===e||"toyota-smartpath-banners"===e,Et=(e,t)=>{if(e===`${ft}-5`)return!0;if(e===`${ft}-1`)return!!Dt(t.integrationId)||!(window.DDC.PrivateAPI.hasPrimaryPlaceholderIntegration||It(e));bt||(bt=Ct());return 0!==(bt.get(e)||[]).length&&!It(e)},Tt=(e,t)=>{let i=e;if(i===d&&Q()&&F.inlinePrimaryBanner&&(i=`${ft}-1`),!Pt(i))return i;const n=((e,t)=>{if(Et(e,t))return e;bt=Ct();const i=Array.from(bt.keys());return i.sort(),i.find((i=>i!==e&&Et(i,t)))})(i,t);return(e=>{Pt(e)&&wt.add(e)})(n),n},At=new Set,St=new Set,Lt=new Set,$t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At.forEach((t=>{const{exclude:i,include:n}=e;i&&t.targetLocation.startsWith(i)||n&&!t.targetLocation.startsWith(n)||t.apply()}))},kt=function(e,t,i,n,a,s,l){let d=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];const h=new vt(i,e,t,n,a,s,l),p=window.DDC.InvData&&null!==n&&n.startsWith("vehicle");d?(t===o||[u,r,c].includes(t))&&(n.startsWith("vehicle")?St.add(h):At.add(h)):!d&&p&&Lt.add(h),h.apply();S(i,{methodType:t,locationName:s||n})},xt=function(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t;return a=Tt(t,e),kt("insert",o,e,a,null,null,i,n)},jt=async function(e,t,i,n){let a,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=null;const l=await pt(e);"button"===t&&(s=null!=l&&l.useCustomInsertLocations?"vehicle-ctas-custom":"vehicle-ctas",a=`vehicle-${i}-button`);const d=Ee.includes(i)?c:r;return kt("insertCallToAction",d,e,s,t,a,n,o)},Mt=function(e,t,i){return kt("update",u,e,t,null,null,i,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])},Ot=["mobile"],Nt=["top","bottom"],Ut=["primary-menu"],Ft={},Rt=(e,t,i)=>{(e=>{if(Ft[e])throw new Error(`The location '${e}' has already been modified by integration '${Ft[e].integration}'.`)})(t),Ft[t]={integration:e,...i},(e=>window._.debounce((()=>{window.dispatchEvent(new CustomEvent("wiapiPageModificationUpdate",{detail:{location:e}}))}),100))(t)()},_t="wiapiSettings",qt=["showPayments","useFilterSortPlaceholders","delayLoadVdpFooter"],Wt=e=>{const t=JSON.parse(sessionStorage.getItem(_t))||{};return e?(null==t?void 0:t[e])||{}:t},Vt=async e=>(await T(),Wt(e)),Jt=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await k(),{pageName:a}=n;if(!a)return;const o=Wt(),s=(e=>["true","false"].includes(e)?"true"===e:e)(t);o[a]||(o[a]={}),void 0===s||!i&&!0===o[a][e]||(o[a][e]=s,(e=>{sessionStorage.setItem(_t,JSON.stringify(e))})(o))},zt=e=>(qt.forEach((async t=>{void 0!==e[t]&&Jt(t,e[t])})),!0);class Ht{constructor(i,n,a,o,s){const r="string"==typeof i?i:i.integrationId,l="string"==typeof i?i:i.integrationType;qe(r,"integrationId"),qe(n,"src"),qe(a,"type"),((e,t)=>{if(!(e instanceof Map))throw new Error(`${t} must be a Map. Got: ${typeof e}.`)})(o,"attributes"),this.init={integrationId:e(r),integrationType:t(l)},this.src=n,this.fileType=a,this.attr=o,this.immutableAttr=["data-web-api-id","data-web-api-type","async","type","src"],this.methodType=this.fileType?`load${this.fileType.toUpperCase()}`:"Load",this.isIntegrationLoad=s,this.load=this.load.bind(this),this.invoked=!1}load(e){if(this.invoked)return new Promise((e=>{e(`Resource ${this.src} already loaded.`)}));const t=e=>{const t=this.isIntegrationLoad?"Integration Loaded":this.methodType;S(this.init,{methodType:t,load:this.src,status:e})},i=()=>(this.invoked=!0,new Promise(((e,i)=>{const n="js"===this.fileType?"script":"link",a=document.createElement(n);switch(a.setAttribute("data-web-api-id",this.init.integrationId),a.setAttribute("data-web-api-type",this.init.integrationType),n){case"script":if(a.type="text/javascript",a.src=this.src,a.async=!0,F.fetchPriorityJS&&a.setAttribute("fetchpriority",F.fetchPriorityJS),this.attr.forEach(((e,t)=>{switch(t){case"priority":break;case"jstype":case"type":"module"===e&&a.setAttribute("type","module");break;case"synchronicity":"async"===e&&a.setAttribute("async","async");break;default:this.immutableAttr.includes(t)||a.setAttribute(t,e)}})),["body","head"].includes(this.attr.get("priority")))return;document.body.appendChild(a);break;case"link":a.type="text/css",a.rel="stylesheet",a.media="all",a.href=this.src,F.fetchPriorityCSS&&a.setAttribute("fetchpriority",F.fetchPriorityCSS),document.head.appendChild(a)}a.onload=()=>{this.invoked=!0,t("Success"),e(this.src)},a.onerror=()=>{t("Failed"),i(this.src)}})).catch((e=>{te(this.init.integrationId,`ERROR: ${e.toString()} failed to load!`)})));return["all","css"].includes(e)&&"css"===this.fileType||["all","js"].includes(e)&&"js"===this.fileType?i():"unknown"===this.fileType&&new Promise(((e,t)=>{t(new Error(`Failed to load unknown resource type of file ${this.src}`))}))}}const Gt=[],Bt=J(),Kt=async function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,a=arguments.length>4?arguments[4]:void 0;const o=i||(e=>e.includes(".css")||e.includes("/css")?"css":e.includes(".js")||e.includes("/js")?"js":"unknown")(t),s=new Ht(e,t,o,n,a);return!!Gt.some((e=>e.src===t))||(Gt.push(s),s.load(o))},Yt=async function(e,t,i){return Kt(e,t,"js",i,arguments.length>3&&void 0!==arguments[3]&&arguments[3])},Qt=e=>Gt.forEach((t=>{t.invoked||t.load(e)})),Xt=L("WebIntegrationAPITestLoader");if(Xt&&void 0!==Bt._integrationMode){const e=Xt.split("|"),t=e[0],i=e[1];Kt(t,i)}const Zt="DISABLE_THIRD_PARTY",ei="ENABLE_THIRD_PARTY",ti="DEBUG_THIRD_PARTY",ii="COX_ONLY",ni="RESET_CUSTOM",ai="INVALID_PROTOCOL",oi="DEVICE_ENABLEMENT",si=e=>{switch(e){case ii:return(()=>{throw new Error("External integrations are disabled due to onlyCoxIntegration mode.")})();case ti:return(()=>{throw new Error("This integration is disabled because Third Party Debug is enabled.")})();case oi:return(()=>{throw new Error("Integration disabled for target device.")})();case Zt:return(()=>{throw new Error("Integration disabled due to _onlyDisableThirdParty param.")})();case ei:return(()=>{throw new Error("Integration disabled due to _onlyEnableThirdParty param.")})();case ai:return(()=>{throw new Error("URL defined does not start with https:// or / and HTTPS is required.")})();case ni:return(()=>{throw new Error("Integrations are disabled.")})();default:return(()=>{throw new Error("An Error occured validating an Integration")})()}},ri=(e,t)=>{switch(e){case ii:return(e=>{const{integrationId:t,integrationUrl:i}=e;te(t,"External integrations are disabled due to onlyCoxIntegration mode.",`Skipping JS: ${i}`)})(t);case ti:return(e=>{const{integrationId:t,integrationUrl:i}=e;te(t,"This integration is disabled because Third Party Debug is enabled.",`Skipping JS: ${i}`)})(t);case oi:return(e=>{const{integrationId:t}=e;te(t,`Config for ${t} found but not enabled for the current device type.`)})(t);case Zt:return(e=>{const{integrationId:t}=e;te(`Skipping load of ${t} due to _onlyDisableThirdParty URL parameter.`)})(t);case ei:return(e=>{const{integrationId:t}=e;te(`Skipping load of ${t} due to _onlyEnableThirdParty URL parameter.`)})(t);case ai:return(e=>{const{integrationId:t}=e;te(`ERROR with '${t}' integration setup:`,"URL defined does not start with https:// or / and HTTPS is required.")})(t);case ni:return(e=>{const{integrationId:t,integrationUrl:i}=e;te(t,`Integrations are disabled. Skipping JS: ${i}`)})(t);case"LOADING_INTEGRATION_JS":return(e=>{const{integrationId:t,integrationUrl:i}=e;te(t,`Loading Integration JS: ${i}`)})(t);default:return}};class li{constructor(e,t,i,n,a,o,s,r,l){this.debugMode=e,this.enabledDesktop=t,this.enabledSeamless=i,this.integrationId=n,this.integrationUrl=a,this.integrationList=o,this.layoutType=s,this.urlParams=r,this.wiseIntegration=l}reducer(e){switch(e){case ii:((e,t)=>{const{integrationId:i,urlParams:n,integrationList:a,integrationUrl:o}=t,s=((e,t,i)=>!("onlyCoxIntegration"===t._mode&&!i.includes(e)))(i,n,a);s||(ri(e,{integrationId:i,integrationUrl:o}),si(e))})(e,{integrationId:this.integrationId,urlParams:this.urlParams,integrationList:this.integrationList,integrationUrl:this.integrationUrl});break;case ti:((e,t)=>{const{debugMode:i,integrationId:n,integrationUrl:a,urlParams:o}=t,s=((e,t)=>!0!==t||"true"===e.thirdPartyServiceDebug)(o,i);s||(ri(e,{integrationId:n,integrationUrl:a}),si(e))})(e,{debugMode:this.debugMode,integrationId:this.integrationId,integrationUrl:this.integrationUrl,urlParams:this.urlParams});break;case oi:((e,t)=>{const{wiseIntegration:i,layoutType:n,enabledSeamless:a,enabledDesktop:o,integrationId:s}=t;((e,t,i,n)=>{if(!e)switch(t){case"mobile":return i;case"desktop":return n;default:return!1}return!0})(i,n,a,o)||(ri(e,{integrationId:s}),si(e))})(e,{wiseIntegration:this.wiseIntegration,layoutType:this.layoutType,enabledSeamless:this.enabledSeamless,enabledDesktop:this.enabledDesktop,integrationId:this.integrationId});break;case Zt:((e,t)=>{const{integrationId:i,urlParams:n}=t,a=((e,t)=>!t._onlyDisableThirdParty||t._onlyDisableThirdParty!==e)(i,n);a||(ri(e,{integrationId:i}),si(e))})(e,{integrationId:this.integrationId,urlParams:this.urlParams});break;case ei:((e,t)=>{const{integrationId:i,urlParams:n}=t,a=((e,t)=>!t._onlyEnableThirdParty||t._onlyEnableThirdParty===e)(i,n);a||(ri(e,{integrationId:i}),si(e))})(e,{integrationId:this.integrationId,urlParams:this.urlParams});break;case ai:((e,t)=>{const{integrationId:i,integrationUrl:n}=t;(e=>!(!e.startsWith("https://")&&!e.startsWith("/")))(n)||(ri(e,{integrationId:i}),si(e))})(e,{integrationId:this.integrationId,integrationUrl:this.integrationUrl});break;case ni:((e,t)=>{const{integrationId:i,integrationUrl:n,urlParams:a}=t,o=(e=>"resetCustom"!==e._mode&&("true"!==e._disableTPS||"true"===e._enableWIAPI)&&"true"!==e._disableWIAPI)(a);o||(ri(e,{integrationId:i,integrationUrl:n}),si(e))})(e,{integrationId:this.integrationId,integrationUrl:this.integrationUrl,urlParams:this.urlParams})}}all(){this.reducer(oi),this.reducer(Zt),this.reducer(ei),this.reducer(ai),this.reducer(ii),this.reducer(ni),this.reducer(ti)}validate(e){this.reducer(e)}validateList(e){e.forEach((e=>{this.validate(e)}))}}const di=F.onlyCoxIntegrations.split(",").map((e=>e.trim())),ci=async()=>{const e=await ct(),t=await k(),i=J(),n=Object.keys(e).reduce(((n,a)=>{const o=e[a];if(o&&o.fields&&o.fields.integrationUrl||o.urls){const{debugMode:s,fields:r,wiseIntegration:l}=o,{enabledDesktop:d,enabledSeamless:c,excludedPages:u}=r,{pageName:h,layoutType:p}=t;if(l){const{urls:t}=o,g=t.map((t=>new Promise((n=>{let{url:o}=t;const{types:g}=t;new li(s,d,c,a,o,di,p,i,l).all();let m=!1,y=!1,v=!1;if(u&&u.split(",").forEach((e=>{h.match(e)&&(y=!0)})),y||(Object.keys(r).forEach((e=>{(e.startsWith("addTo")||"includedPages"===e)&&(v=!0,r[e].split(",").forEach((e=>{("ALL"===e||h.match(e))&&(m=!0)})))})),m||v||(m=!0)),m){Dt(a)&&(window.DDC.PrivateAPI.hasPrimaryPlaceholderIntegration=!0),zt(r),!o.startsWith("/")||o.startsWith("//")||o.startsWith("/static/")||(o=`/static${o}`);const t=lt(o)?dt(o,e[a].fields):o;te(a,`Loading Integration JS: ${t}`),Yt({integrationId:a,integrationType:"wise"},t,g.split(",").reduce(((e,t)=>{const[i,n]=t.split("=");return e.set(i,n),e}),new Map),!0)}else te(a,`Config for ${a} found but excluded for the current page: ${h}.`);n(!0)}))));return[...n,...g]}{const t=new Promise((t=>{let{integrationUrl:n}=r;new li(s,d,c,a,n,di,p,i,l).all();let o=!1,g=!1,m=!1;if(u&&u.split(",").forEach((e=>{h.match(e)&&(g=!0)})),g||(Object.keys(r).forEach((e=>{(e.startsWith("addTo")||"includedPages"===e)&&(m=!0,r[e].split(",").forEach((e=>{("ALL"===e||h.match(e))&&(o=!0)})))})),o||m||(o=!0)),o){Dt(a)&&(window.DDC.PrivateAPI.hasPrimaryPlaceholderIntegration=!0),zt(r),!n.startsWith("/")||n.startsWith("//")||n.startsWith("/static/")||(n=`/static${n}`);const t=lt(n)?dt(n,e[a].fields):n;te(a,`Loading Integration JS: ${t}`),Yt({integrationId:a,integrationType:"api"},t,new Map,!0)}else te(a,`Config for ${a} found but excluded for the current page: ${h}.`);t(!0)}));return[...n,t]}}return n}),[]);return await Promise.allSettled(n)};class ui{constructor(e,t,i){Je(e,"init"),(e=>{if(qe(e,"locationName"),!_e.includes(e))throw new Error(`Invalid location: ${e}. Valid options are: ${_e.join(", ")}.`)})(t),((e,t)=>{We(t,"Modifier");const{schema:i}=t;"schedule-service"===e&&(We(i,"Schema of the modifier object"),Ve(t,["schema"],`Modifier object of ${e}.`),Ve(i,["href","target","onclick","popover","attributes"],`the schema of the modifier object  of ${e}.`))})(t,i),Rt(e.integrationId,t,i);const{schema:n,callback:a}=i;this.init=e,this.location=t,this.locationHandler=Re[this.location],this.schema=n,this.integrationCall=a,this.apply=this.apply.bind(this)}async apply(){await this.locationHandler.isReady();const e=await this.locationHandler.getElements();e&&e.forEach((e=>{switch(this.location){case"schedule-service":{const t=Ue(this,e,this.schema,!1);W(t);break}}}))}}class hi{constructor(e){(e=>{if(qe(e,"event type"),!e.match(/.*-v\d+/))throw new Error(`Event types must end with a version (like -v1). Got: ${e}.`)})(e),this.eventType=e,this.fireEvent=this.fireEvent.bind(this),this.invoke=this.invoke.bind(this)}fireEvent(e){(e=>{if(!e.type)throw new Error("Events must have a type property.");const t={...e,timestamp:new Date};Ge.forEach(e.type,(e=>{Be(e.init.integrationId,e.callback,t)})),He.push(e.type,t)})({type:this.eventType,...e})}invoke(){throw new Error("Event emitters should override invoke to fire events.")}}class pi extends hi{constructor(e){super(e),this.invokeOnce=this.invokeOnce.bind(this),this.invoked=!1}invoke(e){this.invoked||(this.invokeOnce(e),this.invoked=!0)}}const gi=()=>{const{dealership:e={},site:t={}}=window.DDC.dataLayer||{},i={};return e.dealerCode.forEach((e=>{Object.assign(i,e)})),{dealershipAddress1:e.address1||"",dealershipAddress2:e.address2||"",dealershipCity:e.city||"",dealershipCodes:i||[],dealershipCountry:e.country||"",dealershipFranchises:t.franchises||[],dealershipName:e.dealershipName||"",dealershipPostalCode:e.postalCode||"",dealershipStateProvince:e.stateProvince||""}};const mi=e=>{const t=document.querySelector(".ws-inv-listing");t&&t.querySelectorAll(".loan-payment, .lease-payment").forEach((t=>{"hide"===e?t.classList.add("d-none"):"show"===e&&t.classList.remove("d-none")}));const i=document.querySelectorAll("#paymentLoan, #paymentLease");i&&i.forEach((t=>{"hide"===e?t.classList.add("d-none"):"show"===e&&t.classList.remove("d-none")}))},yi=()=>{Jt("hideDefaultPayments",!0),mi("hide")},vi=()=>{Jt("hideDefaultPayments",!1,!0),mi("show")},wi=async()=>{var e;const t=null===(e=window)||void 0===e||null===(e=e.DDC)||void 0===e||null===(e=e.siteSettings)||void 0===e?void 0:e.pageAlias;if(!t)return;const i=await Vt(t),n=(()=>{const e=JSON.parse(localStorage.getItem("userShowPayments"))||{};return null==e?void 0:e.show})();null!=i&&i.hideDefaultPayments||n?yi():vi()};const fi="ddc-content web-api-added-placeholder hidden",bi=(e,t)=>_(`[data-location="${t}"]`,e)||_(`[data-location="${t}-custom"]`,e),Ci=(e,t,i)=>{const n=document.createElement(e);return n.setAttribute(a,t),n.setAttribute("class","hidden"),i&&i.split(" ").forEach((e=>{n.classList.add(e)})),n},Pi=(e,t,i)=>e.includes(t)?i:`${t} ${i}`,Ii=(e,t)=>{e.parentNode.insertBefore(t,e.nextSibling)},Di=(e,t)=>{e.parentNode.insertBefore(t,e)},Ei=(e,t)=>{e.appendChild(t)},Ti=()=>{const e=q(".ddc-vehicle-cta-summary");return e.length>0?e:q('[data-widget-name="ws-vehicle-ctas"]')},Ai=(e,t)=>{if(!bi(document,e)){const i=_(t);i&&i.setAttribute(a,e)}},Si=new Map([["ASK","vehicle-ask-button"],["DRIVE","vehicle-drive-button"]]),Li=async()=>{const e=_(".fixed-vdp-footer"),t=_(".links-list ul",e);return t&&(t.setAttribute("data-location","mobile-vdp-footer"),(async e=>{window.ldClient?(await window.ldClient.waitUntilReady(),e()):document.addEventListener("LDClientReady",e)})((async()=>{const t=window.ldClient.allFlags(),i=t["mobile-vdp-footer-delay"]||2e3,n=t["toggle-delay-vdp-footer"]||!1,a=await(async()=>(await Vt(window.DDC.siteSettings.pageAlias)).delayLoadVdpFooter||!1)()&&n;setTimeout((()=>{var t;null==e||null===(t=e.classList)||void 0===t||t.add("in")}),a?i:0)}))),!0},$i=async()=>{const e=await k(),t="data-target-locations";let i,n=[];var o,s;e.detailPage&&(i=_(".eprice-react-portal"),n=null!==(o=i)&&void 0!==o&&o.getAttribute(t)?null===(s=i)||void 0===s||null===(s=s.getAttribute(t))||void 0===s?void 0:s.split(" "):[]);return e.searchPage&&_(".inventory-listing-grid")?q(".gv-pricing").forEach((e=>{bi(e,g)||e.appendChild(Ci("ul",g,"list-unstyled d-flex flex-column justify-content-center w-100")),bi(e,p)||e.appendChild(Ci("div",p)),bi(e,y)||e.appendChild(Ci("div",y)),bi(e,h)||e.appendChild(Ci("ul",h,"list-unstyled d-flex flex-wrap justify-content-center"))})):(e.searchPage||e.detailPage)&&(await(async e=>{if(!bi(document,d)){const t=Ci("div",d,fi);let i;e.detailPage?(i=_('[data-widget-id="tps-mediabot1"]')?_('[data-widget-id="tps-mediabot1"]'):_('[data-widget-name="ws-quick-specs"]'),i||(i=_('[data-widget-name="inventory-detail-highlighted-features"]'))):e.searchPage&&(i=_('[data-name="srp-wrapper-page-title"]')||_('[data-widget-name="inventory-listing-default"]')),i&&Di(i,t)}return!0})(e),await(async(e,t)=>{if(!e.detailPage&&!e.searchPage)return!0;if(e.detailPage&&_('[data-widget-id="links-lead1"]')){const e=q('[data-widget-id="links-lead1"] .btn');e.length>0&&e.forEach((e=>{const t=e.getAttribute("data-link-label");t&&Si.has(t)&&!e.getAttribute(a)&&e.setAttribute(a,Si.get(t))}))}if(e.detailPage&&_('[data-widget-name="ws-vehicle-ctas"]')){const e=Ti(),i=Pi(t,p,w);e.length>0&&e.forEach((e=>{e.setAttribute(a,i),q('[data-location~="vehicle-ctas"]',e).forEach((e=>{e.removeAttribute(a),e.classList.add("mb-3")}))}))}else{let t=[];if(e.searchPage)t=q(".pricing-area .pricing");else if(e.detailPage){const e=_(".inventory-detail-pricing .pricing");e&&t.push(e)}t.forEach((e=>{const t=document.createElement("li");t.setAttribute(a,p),t.setAttribute("class","web-api-added-placeholder hidden mt-3"),Ei(e,t)}))}return!0})(e,n),await(async(e,t)=>{if(e.detailPage){const e=Pi(t,m,b);bi(document,e)||q('[data-widget-name="ws-detailed-pricing"]').forEach((t=>{const i=Ci("div",e,`${fi} ws-detailed-pricing`);Ii(t,i)}))}return!0})(e,n),await(async(e,t)=>{if(e.detailPage){const i=Pi(t,p,w),n=Pi(t,y,C),a=q(`[data-location="${i}"]`);if(a.length>0){const t=a[a.length-1],i="desktop"===e.layoutType?"ddc-content responsive-content-max-hide responsive-content-mid-hide responsive-content-min-hide box web-api-added-placeholder hidden":fi,o=Ci(t.tagName.toLowerCase(),n,i);t.classList.add("pb-0"),Ii(t,o)}}else e.searchPage&&q(".pricing-area .pricing").forEach((e=>{const t=Ci("li",y,"web-api-added-placeholder hidden mb-4");Ei(e,t)}));return!0})(e,n),e.searchPage&&_(".inventoryList")?(q(".hproduct .media").forEach((e=>{bi(e,g)||e.appendChild(Ci("ul",g,"list-unstyled d-flex flex-column"))})),q(".hproduct .calloutDetails ul").forEach((e=>{bi(e,h)||e.setAttribute(a,h)}))):e.detailPage&&((async(e,t)=>{const i=Pi(t,g,f),n=Pi(t,h,v);if(e.detailPage&&!bi(document,i)){const e=_('[data-widget-name="inventory-detail-highlighted-features"]');if(e){const t=Ci("ul",i,"list-unstyled web-api-added-placeholder");Di(e,t)}}Ai(n,".calloutDetails ul"),Ai(i,'.osiris-third-party-include [data-location="vehicle-media"]')})(e,n),await(async e=>{if(!e.detailPage)return!0;if(!bi(document,"secondary-content")){const e=Ci("div","secondary-content",fi),t=_('[data-widget-id="detailed-specs1"]');t&&Ii(t,e)}return!0})(e),await(async e=>!e.detailPage||(Ti().forEach(((e,t)=>{const i=e.getAttribute("data-location"),n=0===t?"top":"bottom";e.setAttribute("data-location",`${i} vehicle-ctas-${n}`)})),!0))(e),"mobile"===e.layoutType&&await Li())),(async e=>{if(!e.pageName.includes("PRIVACY"))return!0;const t=_('[data-widget-name="privacy-form"]');if(t)return t.setAttribute("data-location","privacy-form"),!0;if(!bi(document,"privacy-form")){const e=Ci("div","privacy-form",fi),t=_('[data-widget-id="content1"]');t&&Ii(t,e)}})(e),!0},ki=[new class extends pi{constructor(){super("page-load-v1")}async invokeOnce(){const e=await k();this.fireEvent({payload:e}),$t({exclude:"listings-"}),At.forEach((e=>{e.apply()}))}},new class extends pi{constructor(){super("dealership-info-v1")}invokeOnce(){this.fireEvent({payload:gi()})}}],xi=[new class extends hi{constructor(){super("vehicle-data-updated-v1")}async invoke(){const e=await k(),t=await ge();this.fireEvent({payload:{pageData:e,vehicleData:t}}),wi()}}],ji=[new class extends hi{constructor(){super("vehicle-shown-v1")}async invoke(e){const t=await k(),i=await ge(),n=async e=>{if(e){const t=i.filter((t=>t.uuid===e.uuid));if(t.length>0){const e=t[0];this.fireEvent({payload:e}),wi()}}else i.forEach((e=>{this.fireEvent({payload:e}),wi()}))};(t.searchPage||t.detailPage)&&(await Z(),(H()&&e||!H())&&await n(e))}}],Mi=async(e,t)=>(e.forEach((e=>{const i=Date.now();try{e.invoke(t);const n=Date.now();window.DDC.integrationLog(`Firing event emitter: ${e.eventType}`),gt("event-emitter",e.eventType,n-i)}catch(t){const n=Date.now();gt("event-emitter-failed",e.eventType,n-i),window.DDC.integrationLog(`Event emitter ${e.eventType} failed and took ${n-i}ms to fail.`,t)}})),!0),Oi=async()=>(await $i(),await(async()=>{_("li.price-btn")&&q("li.price-btn").forEach((e=>{e.classList.add("clearfix")}));return!0})(),Mi(ki)),Ni=async()=>Mi(xi),Ui=async e=>Mi(ji,e),Fi={},Ri=async(e,t)=>{const i="getJwtForVehicles"===t?await ye(e,"vin"):["false"];return fetch(`/api/ipp/jwt/vehicles?vins=${i.join()}`).then((i=>{if(!i.ok)throw S(e,{methodType:t,status:"Failed"}),new Error("Invalid response from the JWT endpoint.");return i.text().then((i=>{const n=(e=>{const t=e.split(".");if(t.length<2)return;const i=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(i).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(n)})(i);return S(e,{methodType:t,status:"Success"}),"getJwtForVehicles"===t?{vins:n.VINs,jwt:i}:{jwt:i}}))}))};class _i{constructor(e){this.init=e}getIntegrationId(){return this.init.integrationId}getIntegrationType(){return this.init.integrationType}}class qi extends _i{constructor(e){super(),this.init=e}}const Wi=[{className:_i,methods:{getAttributeForVehicles:ye,getConfig:pt,getDealerData:e=>new Promise(((t,i)=>{const{dealership:n={}}=window.DDC.dataLayer||{};if(Object.keys(n))return S(e,{methodType:"getDealerData",status:"Success"}),void t(gi());S(e,{methodType:"getDealerData",status:"Failed"}),i(new Error("Unable to retrieve dealership data."))})),getJwtForSite:async e=>Ri(e,"getJwtForSite"),getJwtForVehicles:async e=>Ri(e,"getJwtForVehicles"),getOemSourcedMerchandisingStatusForVehicles:async e=>{const t=(await ge("oemSourcedMerchandisingStatus")).reduce(((e,t)=>(t.oemSourcedMerchandisingStatus&&e.push({vin:t.vin,oemSourcedMerchandisingStatus:t.oemSourcedMerchandisingStatus}),e)),[]);return e&&S(e,{methodType:"OEM Source Merchandising Status",status:"Success"}),t},getOemSourcedMerchandisingStatusByVin:async(e,t)=>{const i=(await ge("oemSourcedMerchandisingStatus")).find((e=>e.vin===t))||{};return e&&S(e,{methodType:"OEM Source Merchandising Status",status:"Success"}),i.oemSourcedMerchandisingStatus},getPageData:async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i="autofi"!==e.integrationId&&t,n=await k();return i&&S(e,{methodType:"getPageData",status:"object"==typeof n?"Success":"Failed"}),n},getPixallVisitorId:async()=>{const e=window.Cookies.get("pxa_id");return e||(await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new Promise(((n,a)=>{const o=setInterval((()=>{window[e]&&(clearInterval(o),clearTimeout(s),n(!0))}),t),s=setTimeout((()=>{clearInterval(o),a(new Error(`Timed out after ${i}ms waiting for ${e} to become available`))}),i)}))}("Pixall"),window.Pixall&&void 0!==window.Pixall.getVisitorId?window.Pixall.getVisitorId():new Error("No Pixall visitorId found"))},getSitemap:async e=>ut(e,"getSitemap",["supplementaryData","siteMaps"]),getSiteProperties:async e=>ut(e,"getSiteProperties",["supplementaryData","siteProperties"]),getUnlockedVehicles:async()=>{var e;const t=(null===(e=window)||void 0===e||null===(e=e.DDC)||void 0===e||null===(e=e.userProfile)||void 0===e?void 0:e.ePriceVehicles)||[];return[...new Set(t.map((e=>{var t;return null!==(t=null==e?void 0:e.itemUUID)&&void 0!==t?t:null})).filter((e=>e)))]},getUrlParams:J,getVehicleData:me,unlockPricing:async(e,t)=>{var i;if(null===(i=window)||void 0===i||null===(i=i.DDC)||void 0===i||null===(i=i.userProfileController)||void 0===i||!i.saveInstantEpriceVehicle)return!1;let n=t;return n||(n=await ye(e,"uuid")),n.forEach((e=>{setTimeout((()=>{window.DDC.userProfileController.saveInstantEpriceVehicle(null,e)}),0)})),!0}}},{className:qi,methods:{getItemList:async(e,t)=>{const i=await k();if(!["inventory-badges","inventory-media"].includes(t))throw new Error(`The requested item list ${t} is not enabled for this API.`);if(!["item-list-badges"].includes(e.integrationId))throw new Error("The getItemList method is not allowed for use with this integration.");return i.searchPage||i.detailPage?(Fi[t]||(Fi[t]=V(e,`/api/badge-item-lists/${t}`,"getItemList")),Fi[t]):[]},getSettings:Vt,hideDefaultPayments:yi,showDefaultPayments:vi}}];Wi.forEach((e=>{const t=e;Object.entries(t.methods).forEach((e=>{let[i,n]=e;t.className.prototype[i]=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const o={integrationId:this.getIntegrationId(),integrationType:this.getIntegrationType()};return"getUrlParams"===i?n.call(null,o,...t):new Promise(((e,i)=>{try{e(n.call(null,o,...t))}catch(e){i(e)}}))}}))}));const Vi={append:se,create:(e,t,i)=>(S(e,{methodType:"Create",type:t,...i}),"button"===t?Ue(e,document.createElement("a"),i):null),insert:xt,insertOnce:(e,t,i)=>xt(e,t,i,!1),insertCallToAction:jt,insertCallToActionOnce:async(e,t,i,n)=>jt(e,t,i,n,!1),insertGalleryContent:async(e,t,i)=>{tt(t);const n=Array.isArray(i)?i:[i];if("vehicle-media"===t){const e=await me();ot(n,e)}S(e,{methodType:"insertGalleryContent",location:t})},insertMenuContent:async(e,t,i)=>{(e=>{if(!Ot.includes(e))throw new Error(`Unsupported device type: '${e}'. Expected one of: ${Ot.join(", ")}.`)})((await k()).layoutType);const n=!!document.querySelector('a[data-href="/navigation-fragments/search-navigation-and-contact.htm"]');n&&document.querySelectorAll('#ddc-mobile-header-nav[data-location="primary-menu primary-menu-top primary-menu-bottom"]').forEach((e=>{e.removeAttribute("data-location")}));const a=Array.isArray(i)?i:[i];return(e=>{if(!Ut.includes(e))throw new Error(`Unsupported menu target: '${e}'. Expected one of: ${Ut.join(", ")}.`)})(t),await D(),a.forEach((i=>{const{position:a,callback:o}=i;(e=>{if(!Nt.includes(e))throw new Error(`Unsupported menu position: '${e}'. Expected one of: ${Nt.join(", ")}.`)})(a);const s=`${t}-${a}`;xt(e,s,((t,a)=>{for(;t.hasChildNodes();)t.removeChild(t.firstChild);const s=(e=>{const{primaryText:t,secondaryText:i,expanded:n,menuIcon:a,subItems:o,position:s,onclick:r,isFragmentNavType:l=!0}=e,d=l?"fragment":"header";if(!t)return te("Required primaryText field is missing."),!1;if(!o||0===o.length){const t=`\n\t\t\t<div class="panel-heading">\n\t\t\t\t<div class="panel-title">\n\t\t\t\t\t<a data-navigation-id="default" class="panel-heading-link accordion-faux collapsed" href="${e.href}" data-iconpos="left">\n\t\t\t\t\t\t<i class="icon-blank"></i>\n\t\t\t\t\t\t<span>${e.primaryText}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,i=st(t);return r&&i.querySelector("a").addEventListener("click",r),i}const c=n?" in":"",u=n?"":" collapsed",h=document.createElement("div"),p=i?`<span class='subtext'>${i}</span>`:"";let g=st(`\n\t\t<div class="panel-heading">\n\t\t\t<div class="panel-title">\n\t\t\t\t<div class="row py-3">\n\t\t\t\t\t${a?'<div class="ddc-span2"><i class="ddc-icon ddc-icon-mycars-login-circle ddc-icon-size-xxlarge"></i></div>':""}\n\t\t\t\t\t<div class="${a?"ddc-span10":"ddc-span12"} pt-3 pb-2">\n\t\t\t\t\t\t<p class="m-0">\n\t\t\t\t\t\t\t<a data-navigation-id="default" href="#" class="no-follow panel-heading-link panel-toggle${u} p-0"\n\t\t\t\t\t\t\tdata-toggle="collapse" data-target="#ddc-fragment-accordion-nav-wiapi-${s}" aria-expanded="false"\n\t\t\t\t\t\t\tui-tabs-initial-load="false" rel="nofollow">\n\t\t\t\t\t\t\t\t<i class="ddc-icon ddc-icon-size-small ddc-icon-plus"></i>\n\t\t\t\t\t\t\t\t<span class="ddc-font-size-large font-weight-bold">${t}</span></a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class="ddc-font-size-small">${p}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`);l||(g=st(`\n\t\t\t<div class="panel-heading">\n\t\t\t\t<div class="panel-title">\n\t\t\t\t\t<a data-navigation-id="default" href="#" class="no-follow panel-heading-link panel-toggle${u}"\n\t\t\t\t\tdata-toggle="collapse" data-target="#ddc-header-accordion-nav-wiapi-${s}" aria-expanded="false"\n\t\t\t\t\tui-tabs-initial-load="false" rel="nofollow">\n\t\t\t\t\t\t<div class="pt-2 pb-6">\n\t\t\t\t\t\t\t${a?'<div class="ddc-span1"><i class="ddc-icon ddc-icon-mycars-login-circle ddc-icon-size-xxlarge"></i></div>':""}\n\t\t\t\t\t\t\t<i class="ddc-icon ddc-icon-size-small ddc-icon-plus"></i>\n\t\t\t\t\t\t\t<div class="${a?"ddc-span10":"ddc-span11"}">\n\t\t\t\t\t\t\t\t<span class="ddc-font-size-large font-weight-bold">${t}</span>\n\t\t\t\t\t\t\t\t<p class="ddc-font-size-small">${p}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`));if(h.appendChild(g),!(null!=e&&e.secondaryText||null!=e&&e.subItems))return h;const m=document.createElement("ul");m.classList.add(`ddc-mobile-${d}-sub-nav`,"list-unstyled"),null!=e&&e.subItems&&e.subItems.forEach((e=>{const t=document.createElement("li"),i=document.createElement("a");i.setAttribute("data-navigation-id","default"),i.classList.add("nav-link","tier3"),i.href=e.href,i.textContent=e.text,"function"==typeof e.onclick&&i.addEventListener("click",e.onclick),t.appendChild(i),m.appendChild(t)}));const y=st(`\n\t\t<div id="ddc-${d}-accordion-nav-wiapi-${s}" class="panel-collapse collapse${c}" aria-expanded="true" style="">\n\t\t\t<div class="panel-body">\n\t\t\t</div>\n\t\t</div>\n\t`);return y.querySelector(".panel-body").appendChild(m),h.appendChild(y),h})({...i,isFragmentNavType:n});if(!s)return;const r=se(e,t,s);o&&o(r,a,i)}),!0),S(e,{methodType:"insertMenuContent",location:s})})),!0},update:Mt,updateOnce:(e,t,i)=>Mt(e,t,i,!1),updateLink:function(e,t,i){return kt("updateLink",l,e,null,"links",t,i,arguments.length>3&&void 0!==arguments[3]&&arguments[3])},modifyContent:(e,t,i)=>{new ui(e,t,i).apply(),S(e,{methodType:"modifyContent",location:t})},load:Kt,loadJS:Yt,loadCSS:async(e,t)=>Kt(e,t,"css"),log:te,subscribe:(e,t,i)=>{Je(e,"init"),qe(t,"eventType");const n=new ze(e,i);Ge.push(t,n),He.forEach(t,(t=>{Be(e.integrationId,i,t)})),S(e,{subscribedEvent:t})},test:(e,t)=>{const i="string"==typeof e?e:e.integrationId;return i&&t&&((e,t,i)=>{let n;if(i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),n=`; expires=${e.toGMTString()}`}else n="";document.cookie=`${e}=${t}${n}; path=/`})("WebIntegrationAPITestLoader",`${i}|${t}`),void 0!==Bt._integrationMode&&Kt(e,t)}},Ji=class{constructor(i){let n,a;const o=document.currentScript&&"function"==typeof document.currentScript.getAttribute&&""!==document.currentScript.getAttribute("data-web-api-id")?document.currentScript:i;o&&"object"==typeof o&&("function"==typeof o.getAttribute&&""!==o.getAttribute("data-web-api-id")?(n=o.getAttribute("data-web-api-id"),a=o.getAttribute("data-web-api-type")||""):({integrationId:n,integrationType:a}=o)),!n&&i&&""!==i&&(n=i,a=i),qe(n,"integrationId"),this.init={integrationId:e(n),integrationType:t(a)},this.utils=new _i(this.init),this.privateUtils=new qi(this.init)}};Object.entries(Vi).forEach((e=>{let[t,i]=e;Ji.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return ae&&"log"!==t&&te(`${this.init.integrationId} called ${t}:`,...n),i.call(null,this.init,...n)}}));const{DDC:zi}=window||{};zi.API=Ji,zi.PrivateAPI=zi.PrivateAPI||{},zi.PrivateAPI={...zi.PrivateAPI,notifyDynamicContent:()=>{Oi(),Qt("all")},notifyInventoryContent:e=>{e?Ui(e):Ni()},timings:{},content:{},getGalleryContent:(e,t)=>(tt(e),Ze[e][t]),getAllGalleryContent:e=>(tt(e),Ze[e]),getPageLevelModifications:e=>e?Ft[e]:Ft,integrationsLoaded:!1,track:S,inventoryData:null};(async()=>{var e;await E(),null!=zi&&null!==(e=zi.userProfileController)&&void 0!==e&&e.loadProfile&&zi.userProfileController.loadProfile()})(),(async()=>{window.dispatchEvent(new Event("WIAPIReady")),await ci(),window.DDC.PrivateAPI.integrationsLoaded=!0,window.dispatchEvent(new Event("WIAPILoaded"))})();let Hi=!1;const Gi=async()=>(R.forEach((e=>{e.disconnect(),R.delete(e)})),Lt.clear(),window.DDC.PrivateAPI.inventoryData=null,await ge(),!0),Bi=e=>{return!e||(Ui({uuid:e}),t={uuid:e},Lt.forEach((e=>{e.apply(t,!0)})),St.forEach((e=>{e.apply(t,!0)})),!0);var t},Ki=e=>{$t({include:e})},Yi=e=>{const{id:t,isLocation:i}=e.detail;i?Ki(t):Bi(t)},Qi=async()=>(window.DDC.PrivateAPI.inventoryData=null,await Gi(),await Ni(),await(async()=>{var e;null!==(e=window)&&void 0!==e&&null!==(e=e.DDC)&&void 0!==e&&null!==(e=e.APIEvents)&&void 0!==e&&e.get&&(window.DDC.APIEvents.get().forEach((e=>{Yi(e)})),window.DDC.APIEvents.received=[]),window.addEventListener("wsInvListingShown",(e=>{Yi(e)})),window.addEventListener("wiapiPlaceholderAvailable",(e=>{Ki(e.detail.location)})),Ki("listings-")})(),!0),Xi=async()=>{const e=await k();if(await Oi(),e.searchPage||e.detailPage)if(await Z(),H()){var t;const e=async()=>{if(Hi)return!0;Hi=!0;let e=null,t=window.innerWidth,i=0;return window.addEventListener("resize",(()=>{const n=_("#card-layout-toggle-portal button.active .ddc-icon");if(!n)return;(n=>{clearTimeout(e),i=window.innerWidth,e=setTimeout((async()=>{(i<=n&&t>=n||i>=n&&t<=n)&&(t=window.innerWidth,Qi())}),500)})(n.classList.contains("ddc-icon-layout-grid")?1440:768)}),!1),await Qi(),window.DDC&&window.DDC.pubsub&&window.DDC.pubsub.subscribe("ws-inv-data/inventory",(async()=>{await Qi()})),window.DDC.InvData.registerToggleListingView((async()=>{await Qi(),document.querySelectorAll("[data-uuid]").forEach((e=>{const t=e.getAttribute("data-uuid");Yi({detail:{id:t,isLocation:!1}})}))})),!0};null!==(t=window.DDC)&&void 0!==t&&null!==(t=t.PrivateAPI)&&void 0!==t&&t.wsInvListingRendered?e():window.DDC.pubsub?window.DDC.pubsub.subscribe("ws-inv-listing-update",(()=>{e()})):window.addEventListener("ws-inv-listing-update",(()=>{e()}))}else await Ni(),await Ui()};(async()=>{await E(),Xi()})(),window.addEventListener("DOMContentLoaded",(()=>{Qt("css"),Qt("js")})),window.addEventListener("load",(()=>{Qt("all")}))}));
//# sourceMappingURL=lib.js.map
