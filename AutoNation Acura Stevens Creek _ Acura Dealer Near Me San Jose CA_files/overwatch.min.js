/*!
 * ActivEngage - Pageview JS
 * Version: 1.7.563
 */
__ae([9],{43:function(t,e,n){"use strict";function s(t){this.dispose=this.dispose.bind(this),this.providers=o.map(i,function(e){if("function"==typeof e.initialize&&e.initialize(t))return e});var e={};a.startTracking.trigger(e),a.unload.subscribe(this.dispose)}var i=n(548),a=n(1).commands,o=(n(1).events,n(3));s.prototype={providers:[],dispose:function(){o.foreach(this.providers,function(t){"function"==typeof t.dispose&&t.dispose()}),a.unload.unsubscribe(this.dispose)}},t.exports=s},538:function(t,e,n){"use strict";t.exports={provider:"activengage",defaults:{visitorName:"Visitor",activTargetDescription:"Special Offer",department:"sales"},eventNames:{chatLaunch:"Visitor Opened Chat",smsLaunch:"Visitor Opened SMS Chat",chatStart:"{VISITOR} started a Chat",smsStart:"{VISITOR} started an SMS Chat",visitorMessage:"{VISITOR} sent a message",activTargetImpression:"ActivTarget Offer Displayed to Visitor"},eventIds:{chatStarted:"activengage_chat_started",chatOpened:"activengage_chat_opened",activTargetImpression:"activengage_activtarget_impression",chatEngagement:"activengage_chat_engagement"},channels:{chat:"chat",sms:"sms"},departments:{sales:"sales",service:"service",parts:"parts",cs:"customer_service",ins:"Insurance",realestate:"real_estate"},pageGroupStrings:{home:"the Home Page",vdp:"a VDP",ddp:"a DDP","ddp-search":"a DDP Search Page","vdp-search":"a VDP Search Page",service:"a Service Page",parts:"a Parts Page",specials:"a Specials Page",finance:"a Finance Page",retailing:"a Digital Retailing Page","trade-in":"a Trade-In Page"}}},539:function(t,e,n){"use strict";function s(t){t||(t={}),this.application=t.application,this.target=t.target,this.action=t.action,this.event=t.event,this.experiment=t.experiment,this.pagegroup=t.pagegroup}t.exports=s},540:function(t,e,n){"use strict";function s(t,e){this.key=t,this.value=e}function i(){this.startTracking=this.startTracking.bind(this),this.stopTracking=this.stopTracking.bind(this),this.restartTracking=this.restartTracking.bind(this),this.recordPageView=this.recordPageView.bind(this),this.logPageViewError=this.logPageViewError.bind(this),this.dispose=this.dispose.bind(this),this.onWspDetected=this.onWspDetected.bind(this),this.onPageGroupDetected=this.onPageGroupDetected.bind(this),this.onLaunchChat=this.onLaunchChat.bind(this),this.onLaunchSms=this.onLaunchSms.bind(this),this.onLaunchDeal=this.onLaunchDeal.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(26),r=n(4),c=n(1).commands,h=n(1).events,d=n(76),u=n(2),m=n(3),l=n(33),p=n(12),g=n(553),b=n(539),v=n(7),f={application:"pageview",events:{openChat:"openchat",openSms:"opensms",startChat:"startchat",startSms:"startsms"},cookies:{clientIp:"ae-clientIp",sessionId:"ae-sessionId",visitorId:"ae-visitorId",legacyVId:"aeSess",pageHidden:"ae-hidden",lastSeen:"ae-lastseen"},pollStatus:{unknown:"Unknown",error:"Error",success:"Poll"},trackStatus:{tracking:"tracking",inactive:"inactive",stopped:"stopped"},chatStatus:{notInChat:"NotInChat",chatting:"Chatting",preChatSurvey:"PreChatSurvey",postChatSurvey:"PostChatSurvey"},commands:{pushPage:"PushPage"},returnMinutes:1};i.prototype={status:f.trackStatus.inactive,visit:null,clientIp:null,pollHistory:[],pendingUpdates:[],pollHistoryMaxLength:5,errorRetryInterval:3e4,initialize:function(t){if(v.isBot)return this.status=f.trackStatus.inactive,!1;var e=t&&t.activengage?t.activengage:t;if(!e||"object"!=(void 0===e?"undefined":a(e)))return u.error("Overwatch module config missing or invalid.",e);if(this.session=r.getSession(),this.account=r.getAccount(),!this.session||"object"!=a(this.session))return u.error("Session config is missing or invalid.",this.session);if(!this.account||"object"!=a(this.account))return u.error("Account config is missing or invalid.",this.account);g.setBaseUrl(e.pageActionUrl),this.pollUrl=e.pollUrl,this.recordUrl=e.recordUrl,this.restoreUrl=e.restoreUrl,this.geoUrl=e.geoUrl,this.analytics=e.analytics,this.logUrl=e.logUrl,this.errorRetryInterval=e.defaultErrorRetryInterval,this.pollHistoryMaxLength=e.pollHistoryMaxLength,c.startTracking.subscribe(this.startTracking),c.stopTracking.subscribe(this.stopTracking),c.recordPageView.subscribe(this.recordPageView),c.logPageViewError.subscribe(this.logPageViewError),h.onChatLaunched.subscribe(this.onLaunchChat),h.onSmsLaunched.subscribe(this.onLaunchSms),h.onDigitalRetailingLaunched.subscribe(this.onLaunchDeal),h.onWspDetected.subscribe(this.onWspDetected),h.onPageGroupDetected.subscribe(this.onPageGroupDetected),h.onVisibilityChange.subscribe(this.onVisibilityChange);return u.debug("Overwatch starting"),!0},dispose:function(){c.startTracking.unsubscribe(this.startTracking),c.stopTracking.unsubscribe(this.stopTracking),c.recordPageView.unsubscribe(this.recordPageView),h.onChatLaunched.unsubscribe(this.onLaunchChat),h.onSmsLaunched.unsubscribe(this.onLaunchSms),h.onDigitalRetailingLaunched.unsubscribe(this.onLaunchDeal),h.onWspDetected.unsubscribe(this.onWspDetected),h.onPageGroupDetected.unsubscribe(this.onPageGroupDetected),h.onVisibilityChange.unsubscribe(this.onVisibilityChange)},restartTracking:function(){this.status===f.trackStatus.tracking&&(clearTimeout(this.pollTimeout),this.poll())},startTracking:function(t){if(this.status!==f.trackStatus.tracking){t=t||{},t.wsp&&!this.wsp&&(this.wsp=t.wsp),t.wspSessionId&&!this.wspSessionId&&(this.wspSessionId=t.wspSessionId);var e=null;this.session.sessionId?this.setSessionId(this.session.sessionId):(e=m.getCookie(f.cookies.sessionId)||"",this.setSessionId(e||this.generateUniqueId())),this.session.visitorId||this.setVisitorId(m.getCookie(f.cookies.legacyVId)||m.getCookie(f.cookies.visitorId)||this.generateUniqueId()),h.onTrackingDataAvailable.trigger(),this.setVisitId("Visit/"+r.getAccount().accountId+"_"+this.session.visitorId),this.record(e,this.wspSessionId)&&(this.status=f.trackStatus.tracking)}},stopTracking:function(){this.status===f.trackStatus.tracking&&(clearTimeout(this.pollTimeout),this.status=f.trackStatus.stopped)},onWspDetected:function(t){this.wsp||(this.wsp=t,this.pendingUpdates.push(new s("wsp",t.displayName)))},onPageGroupDetected:function(t){this.pagegroup||(this.pagegroup=t,this.pendingUpdates.push(new s("pagegroup",t)))},detectVisitorReturning:function(){var t=parseInt(m.getCookie(f.cookies.lastSeen));if(!t)return void m.setCookie(f.cookies.lastSeen,new Date-0,(new Date).addYears(3));if((new Date).addMinutes(-f.returnMinutes)-0>t){var e=(new Date-t)/1e3/60;h.onVisitorReturn.trigger(e)}m.setCookie(f.cookies.lastSeen,new Date-0,(new Date).addYears(3))},recordPageView:function(t){if(this.status===f.trackStatus.tracking){var e=window.location.href;t&&t.href&&(e=t.href),this.record(null,null,e)}},logPageViewError:function(t){return this.logUrl?t?void this.logError(t):void u.error("Params not provided to recordError"):void u.error("Overwatch log url not set")},logError:function(t){var e;t.errorDetail&&t.errorDetail.length>100&&(e=t.errorDetail.slice(0,99));var n={accountId:this.account.accountId,visitorId:this.session.visitorId,errorMessage:t.errorMessage,errorDetail:encodeURI(e),pageUrl:t.pageUrl,browser:navigator.userAgent.toLowerCase(),PV2Version:r.constants.version},s={encodedLogErrorRequest:m.base64(n)};return l.get(this.logUrl+"/error",s).done(function(t){u.debug("Recorded PV2 error: ",t)}.bind(this)).fail(function(t){u.error("Could not log error to overwatch:",t)}.bind(this))},record:function(t,e,n){if(!this.recordUrl||!t&&!e&&!this.session.sessionId)return!1;n=n||window.location.href,t=t||e?t:this.session.sessionId;var s={sessionId:t,siteId:this.account.siteId,accountId:this.account.accountId,visitorId:this.session.visitorId,referrerUrl:document.referrer,pageUrl:n};return e&&(s.wspSessionId=e),this.wsp&&(s.wsp=this.wsp),l.get(this.recordUrl,s).done(function(e){switch(u.debug("Record response success received.",e),e.status){case f.pollStatus.success:this.visit=e.visit,this.setVisitId(this.visit.id),this.logPollResponse(f.pollStatus.success),this.schedule(e.nextPollInterval+this.generateRandomDelay(),this.poll),d.saveVisitData(e.visit),e.visit.sessionId!=t&&this.restoreSessionFromServer(e.visit),e.visit.chatStatus==f.chatStatus.chatting&&e.visit.chatId&&(u.info("Restoring chat "+e.visit.chatId),!o.isChatActive()&&e.visit.chatId&&c.restoreChat.trigger(e.visit.chatId)),this.detectVisitorReturning();break;default:u.debug("Stopping tracking."),this.status=f.trackStatus.stopped}}.bind(this)).fail(function(t){u.debug("Record response error received.",t),this.logPollResponse(f.pollStatus.error),this.schedule(this.determineNextTimeout(),this.record)}.bind(this)),!0},poll:function(){if(!this.pollUrl)return!1;var t={sessionId:this.session.sessionId,accountId:this.account.accountId};if(this.pendingUpdates.length>0){for(var e={};this.pendingUpdates.length;){var n=this.pendingUpdates.pop();this.visit&&this.visit[n.key]==n.value||(e[n.key]=n.value)}t.updates=JSON.stringify(e).replace(/"/g,"'")}return l.get(this.pollUrl,t).done(function(t){if(u.debug("Poll response success received.",t),"object"===(void 0===t?"undefined":a(t)))switch(this.processServerCommands(t.commands),t.status){case f.pollStatus.success:this.logPollResponse(f.pollStatus.success),this.schedule(t.nextPollInterval+this.generateRandomDelay(),this.poll);break;case f.pollStatus.unknown:this.logPollResponse(f.pollStatus.unknown),this.schedule(this.generateRandomDelay(),this.restore)}}.bind(this)).fail(function(t){u.debug("Poll response error received.",t),this.logPollResponse(f.pollStatus.error),this.schedule(this.determineNextTimeout(),this.poll)}.bind(this)),!0},restore:function(){if(!this.restoreUrl)return!1;var t=m.clone(this.visit);t.clickPath.length>5&&t.clickPath.splice(0,t.clickPath.length-5);var e={encodedVisitData:m.base64(JSON.stringify(t))};return l.get(this.restoreUrl,e).done(function(t){switch(u.debug("Restore response success received.",t),t.status){case f.pollStatus.success:this.logPollResponse(f.pollStatus.success),this.schedule(t.nextPollInterval+this.generateRandomDelay(),this.poll);break;default:u.debug("Stopping tracking."),this.status=f.trackStatus.stopped}}.bind(this)).fail(function(t){u.debug("Restore response error received.",t),this.logPollResponse(f.pollStatus.error),this.schedule(this.determineNextTimeout(),this.record)}.bind(this)),!0},loadAnalytics:function(){this.analytics&&this.analytics.trackingTagTypes&&analytics.load(this.analytics.trackingTagTypes)},logPollResponse:function(t){this.pollHistory.push(t);var e=Math.max(this.pollHistory.length-this.pollHistoryMaxLength,0);e&&this.pollHistory.splice(0,e)},generateUniqueId:function(){var t=new Date,e=t.getYear().toString(),n=(t.getMonth()+1).toString(),s=t.getDate().toString(),i=m.generateRandomId(15);return n<10&&(n="0"+n),s<10&&(s="0"+s),e+n+s+i},generateRandomDelay:function(){return m.getRandomInt(0,1e3)},determineIpAddress:function(){var t=new p,e=m.getCookie(f.cookies.clientIp)||"";return!e&&this.geoUrl?l.get(this.geoUrl).done(function(n){u.debug("Geo response.",n),e="object"===(void 0===n?"undefined":a(n))?n.Ip||"":"",e&&m.setCookie(f.cookies.clientIp,e,(new Date).addMinutes(10)),t.resolve(e)}).fail(function(e){u.debug("Geo response error received.",e),t.resolve("")}):t.resolve(e),t.promise},determineNextTimeout:function(){for(var t=-1,e=0;e<this.pollHistory.length;e++)this.pollHistory[e]==f.pollStatus.error&&this.numRecentErrors++;return 0<this.pollHistoryMaxLength&&(t=this.errorRetryInterval*Math.pow(2,0)),t},restoreSessionFromServer:function(t){u.debug("Restoring session from server",t),this.setSessionId(t.sessionId),this.setVisitorId(t.visitorId)},setSessionId:function(t){this.session.sessionId=t,m.setCookie(f.cookies.sessionId,this.session.sessionId,(new Date).addMinutes(60)),r.setSession(this.session)},setVisitorId:function(t){this.session.visitorId=t,m.setCookie(f.cookies.visitorId,this.session.visitorId,(new Date).addYears(3)),r.setSession(this.session)},setVisitId:function(t){this.session.visitId=t,r.setSession(this.session)},processServerCommands:function(t){if(t){var e;if(t instanceof Array)for(var n=0;n<t.length;n++)switch(e=t[n],e.key){case f.commands.pushPage:return window.location=e.value}}},schedule:function(t,e){clearTimeout(this.pollTimeout),t>0&&(this.pollTimeout=setTimeout(e.bind(this),t))},onLaunchChat:function(t){this.restartTracking(t),g.add(new b({application:f.application,target:t.source,action:t.action,event:f.events.openChat,pagegroup:this.pagegroup||""}))},onLaunchSms:function(t){g.add(new b({application:f.application,target:t.source,action:t.action,event:f.events.openSms,pagegroup:this.pagegroup||""}))},onLaunchDeal:function(t){g.add(new b({application:f.application,target:t.source,action:t.action,event:f.events.openSms,pagegroup:this.pagegroup||""}))},onVisibilityChange:function(t){"visible"===t&&h.onTabChangeReturn.trigger()}},t.exports=new i},541:function(t,e,n){"use strict";function s(){this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.getOnFormSubmittedParams=this.getOnFormSubmittedParams.bind(this),this.dispose=this.dispose.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=(n(7),n(3),n(1).callbacks);s.prototype={initialize:function(){if(window.utag&&window.utag.id&&window.utag.id.indexOf("autonation")>-1){a.debug("AutoNation tag detected.");var t=this.getWTK();t&&a.debug("WTK detected : "+t);var e=this.getAID();return e&&a.debug("AID detected : "+e),o.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),o.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),o.getOnFormSubmittedParams.subscribe(this.getOnFormSubmittedParams),!0}},getAID:function(){return this.getAutonationDataProperty("aid")},getWTK:function(){return this.getAutonationDataProperty("wtk_clean")},getAutonationDataProperty:function(t){return window.utag&&window.utag.data?window.utag.data[t]:""},getOnChatLaunchedParams:function(t){this.processParams(t)},getOnSmsLaunchedParams:function(t){this.processParams(t)},getOnFormSubmittedParams:function(t){this.processParams(t)},processParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);t.data=t.data||{};var e=this.getWTK();e&&(t.data.wtk=e);var n=this.getAID();n&&(t.data.autonationaid=n)},dispose:function(){o.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),o.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams),o.getOnFormSubmittedParams.unsubscribe(this.getOnFormSubmittedParams)}},t.exports=new s},542:function(t,e,n){"use strict";function s(){this.onStartTracking=this.onStartTracking.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.dispose=this.dispose.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=(n(3),n(1).commands),r=(n(1).events,n(1).callbacks);s.prototype={context:null,initialize:function(){if(window.CDK_AE||window.cdkGTM)return this.context=window._dt,this.context?(o.startTracking.subscribe(this.onStartTracking,this,10),r.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),!0):a.warn("CDK Overwatch : Analytics Data Not Found.")},onStartTracking:function(t){t=t||{},t.wsp||(t.wsp="cdk"),t.wspSessionId||(t.wspSessionId=this.context.sessionId)},dispose:function(){o.startTracking.unsubscribe(this.onStartTracking),r.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams)},getOnChatLaunchedParams:function(t){this.processParams(t)},getOnSmsLaunchedParams:function(t){this.processParams(t)},processParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);t.data=t.data||{};var e,n,s;if(void 0!==this.context)try{e=this.context.data.dtuid,n=this.context.data.parms.webid,s=this.context.data.profile.type}catch(t){a.error("Could not retrieve CDK tracking parameters.")}t.data.analytics_cdk_id=e+"_"+n+"_"+s}},t.exports=new s},543:function(t,e,n){"use strict";function s(){this.dispose=this.dispose.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=n(1).events,r=n(1).callbacks;s.prototype={providerName:"ActivEngage",timestamp:void 0,initialize:function(){return window._satellite&&_satellite.company&&_satellite.company.orgId&&"3ECF483F53AB366E0A490D44@AdobeOrg"==_satellite.company.orgId?(this.onChatLaunched=this.onChatLaunched.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onInviteClose=this.onInviteClose.bind(this),this.onChatAnswered=this.onChatAnswered.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),o.onChatLaunched.subscribe(this.onChatLaunched),o.onSmsLaunched.subscribe(this.onSmsLaunched),o.onInviteClose.subscribe(this.onInviteClose),o.onChatAnswered.subscribe(this.onChatAnswered),r.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),a.info("Detected FCA - Merkle Analytics."),!0):a.debug("FCA - Merkle Analytics was not detected.")},dispose:function(){o.onChatAnswered.unsubscribe(this.onChatAnswered),o.onInviteClose.unsubscribe(this.onInviteClose),o.onSmsLaunched.unsubscribe(this.onSmsLaunched),o.onChatLaunched.unsubscribe(this.onChatLaunched)},getOnChatLaunchedParams:function(t){this.processParams(t)},processParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);this.timestamp=new Date,t.data=t.data||{},t.data.merkle_timestamp=this.timestamp},onChatLaunched:function(){var t={type:"CustomTagEvent",eventName:"initiation",eventAction:"chat",attributes:{chatType:"passive",location:"floating",provider:this.providerName}};try{window.digitalData.newEvent(t),a.debug("MerkleAnalytics Event",t)}catch(t){a.error("Merkle Analytics Error",t)}},onSmsLaunched:function(){var t={type:"CustomTagEvent",eventName:"sms",eventAction:"chat"};try{window.digitalData.newEvent(t),a.debug("MerkleAnalytics Event",t)}catch(t){a.error("Merkle Analytics Error",t)}},onInviteClose:function(t){if(t&&t.explicitClose){var e={type:"CustomTagEvent",eventName:"declined",eventAction:"chat"};try{window.digitalData.newEvent(e),a.debug("MerkleAnalytics Event",e)}catch(t){a.error("Merkle Analytics Error",t)}}},onChatAnswered:function(t,e){var n=this.timestamp.toISOString(),s=n.substr(0,n.length-5);window.digitalData.chatID=e+":"+s;var i={type:"CustomTagEvent",eventName:"acceptance",eventAction:"chat"};try{window.digitalData.newEvent(i),a.debug("MerkleAnalytics Event",i)}catch(t){a.error("Merkle Analytics Error",t)}}},t.exports=new s},544:function(t,e,n){"use strict";function s(){this.dispose=this.dispose.bind(this)}var i=n(2),a=n(4),o=n(1).events;n(1).callbacks;s.prototype={providerName:"activengage",operatorLineCount:0,visitorLineCount:0,startTime:null,engagedInChat:!1,endedFired:!1,missedFired:!1,initialize:function(){return window._satellite&&_satellite.company&&_satellite.company.orgId&&"757A02BE532B22BA0A490D4C@AdobeOrg"==_satellite.company.orgId&&"tier3"==_satellite.getVar("Site Name")?(this.onChatLaunched=this.onChatLaunched.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatAnswered=this.onChatAnswered.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatMissed=this.onChatMissed.bind(this),this.onBeforeUnload=this.onBeforeUnload.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),o.onChatLaunched.subscribe(this.onChatLaunched),o.onSmsLaunched.subscribe(this.onSmsLaunched),o.onChatStarted.subscribe(this.onChatStarted),o.onChatAnswered.subscribe(this.onChatAnswered),o.onChatEnded.subscribe(this.onChatEnded),o.onChatMissed.subscribe(this.onChatMissed),o.onBeforeUnload.subscribe(this.onBeforeUnload),o.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),i.info("Detected GM Adobe Analytics."),!0):i.debug("Gm Adobe Analytics was not detected.")},dispose:function(){o.onChatLaunched.unsubscribe(this.onChatLaunched),o.onChatAnswered.unsubscribe(this.onChatAnswered),o.onChatStarted.unsubscribe(this.onChatStarted),o.onChatMissed.unsubscribe(this.onChatMissed),o.onBeforeUnload.unsubscribe(this.onBeforeUnload),o.onSmsLaunched.unsubscribe(this.onSmsLaunched),events.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured)},onChatLaunched:function(){this.engagedInChat=!0,this._sendToAdobe("chat-init")},onChatStarted:function(){this.startTime=new Date,o.onChatLineReceived.subscribe(this.onChatLineReceived)},onSmsLaunched:function(){this._sendToAdobe("click-text")},onChatMissed:function(){this.missedFired||(this._sendToAdobe("missed-chat"),this.missedFired=!0)},onChatAnswered:function(t,e){},onChatEnded:function(){this.endedFired=!0,this.engagedInChat&&0===this.visitorLineCount&&this._sendToAdobe("abandoned-chat");var t=this._getTimeSinceStart();this._sendToAdobe("chat-end",{duration:t})},onChatVisitorNameCaptured:function(t){t=t||{},this.onChatLineReceived({sender:"visitor",message:t.name})},onChatLineReceived:function(t){if("operator"==t.sender&&0===this.operatorLineCount){this.operatorLineCount+=1;var e=this._getTimeSinceStart();this._sendToAdobe("response-time",{response:e})}else"operator"!=t.sender&&"system"!=t.sender&&(this.visitorLineCount+=1)},onBeforeUnload:function(){this.engagedInChat?this.endedFired||this.onChatEnded():this._sendToAdobe("chat-shows")},_sendToAdobe:function(t,e){e||(e={}),e.visitorID=a.getSession().visitorId,e.toolProvider=this.providerName;try{_satellite.track(t,e),i.debug("GmAdobeAnalytics Event: "+t,e)}catch(t){i.error("GmAdobeAnalyticsError",t)}},_getTimeSinceStart:function(){if(null===this.startTime)return null;var t=new Date-this.startTime;return Math.floor(t/1e3/60)+":"+Math.floor(t/1e3%60)}},t.exports=new s},545:function(t,e,n){"use strict";function s(){this.onChatLaunched=this.onChatLaunched.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnClickActionParams=this.getOnClickActionParams.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatMissed=this.onChatMissed.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onActivTargetLaunched=this.onActivTargetLaunched.bind(this),this.onActivTargetInteraction=this.onActivTargetInteraction.bind(this),this.onActivTargetSubmitSuccess=this.onActivTargetSubmitSuccess.bind(this),this.onActivTargetSubmitError=this.onActivTargetSubmitError.bind(this),this.onMediaClicked=this.onMediaClicked.bind(this),this.onPanelMinimized=this.onPanelMinimized.bind(this),this.onPanelMaximized=this.onPanelMaximized.bind(this),this.onPanelHidden=this.onPanelHidden.bind(this),this.onPageGroupDetected=this.onPageGroupDetected.bind(this),this.onVideoAssistStart=this.onVideoAssistStart.bind(this),this.onVideoAssistEnd=this.onVideoAssistEnd.bind(this),this.onLauncherLaunching=this.onLauncherLaunching.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatRestored=this.onChatRestored.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.onFormLaunched=this.onFormLaunched.bind(this),this.onFormFieldCompleted=this.onFormFieldCompleted.bind(this),this.onFormSubmitSuccess=this.onFormSubmitSuccess.bind(this),this.onFormSubmitError=this.onFormSubmitError.bind(this),this.onActivTargetClosed=this.onActivTargetClosed.bind(this),this.getOnFormSubmittedParams=this.getOnFormSubmittedParams.bind(this),this.onAscEnabled=this.onAscEnabled.bind(this),this.onCloseMenuDisplayed=this.onCloseMenuDisplayed.bind(this),this.onCloseMenuCleared=this.onCloseMenuCleared.bind(this),this.dispose=this.dispose.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=n(3),r=n(1).events,c=(n(1).commands,n(1).callbacks),h=n(68).eventNames,d=n(68).commTypes,u=n(68).elementTypes,m=n(68).actions,l=n(68).pageTypes,p=n(68).surveyTypes.preChatSurveys,g=n(68).surveyTypes.postChatSurveys;s.prototype={analyticsClients:[],ascEnabled:!1,launcherLoaded:!1,provider:null,currentPageGroup:null,currentChatPosition:null,currentChatId:null,currentChatDepartment:null,registeredForms:{},initialize:function(){if(window.gtag)this.onInitGA4();else{if(!window.ga||!window.ga.getAll)return a.debug("Google Analytics was not detected.");this.onInitUA()}return c.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),c.getOnFormSubmittedParams.subscribe(this.getOnFormSubmittedParams),c.getOnClickActionParams.subscribe(this.getOnClickActionParams),r.onAscEnabled.subscribe(this.onAscEnabled),r.onChatLaunched.subscribe(this.onChatLaunched),r.onSmsLaunched.subscribe(this.onSmsLaunched),r.onChatStarted.subscribe(this.onChatStarted),r.onChatMissed.subscribe(this.onChatMissed),r.onChatEnded.subscribe(this.onChatEnded),r.onSmsStarted.subscribe(this.onSmsStarted),r.onActivTargetLaunched.subscribe(this.onActivTargetLaunched),r.onActivTargetInteraction.subscribe(this.onActivTargetInteraction),r.onActivTargetSubmitSuccess.subscribe(this.onActivTargetSubmitSuccess),r.onActivTargetSubmitError.subscribe(this.onActivTargetSubmitError),r.onMediaClicked.subscribe(this.onMediaClicked),r.onPanelMaximized.subscribe(this.onPanelMaximized),r.onPanelMinimized.subscribe(this.onPanelMinimized),r.onPanelHidden.subscribe(this.onPanelHidden),r.onPageGroupDetected.subscribe(this.onPageGroupDetected),r.onVideoAssistStart.subscribe(this.onVideoAssistStart),r.onVideoAssistEnd.subscribe(this.onVideoAssistEnd),r.onLauncherLaunching.subscribe(this.onLauncherLaunching),r.onChatLineReceived.subscribe(this.onChatLineReceived),r.onChatRestored.subscribe(this.onChatRestored),r.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),r.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),r.onFormFieldCompleted.subscribe(this.onFormFieldCompleted),r.onFormSubmitSuccess.subscribe(this.onFormSubmitSuccess),r.onFormSubmitError.subscribe(this.onFormSubmitError),r.onActivTargetClosed.subscribe(this.onActivTargetClosed),r.onCloseMenuDisplayed.subscribe(this.onCloseMenuDisplayed),r.onCloseMenuCleared.subscribe(this.onCloseMenuCleared),r.onFormLaunched.subscribe(this.onFormLaunched),!0},onInitUA:function(){this.provider=window.ga;var t=[];if(this.analyticsClients=o.map(this.provider.getAll(),function(e){var n={clientId:e.get("clientId"),trackingId:e.get("trackingId"),name:e.get("name")};return t.indexOf(n.trackingId)>-1?(a.debug("Skipping duplicate trackingId: "+n.trackingId),null):(t.push(n.trackingId),a.debug("Found Google Analytics client (name: "+n.name+", trackingId: "+n.trackingId+", clientId: "+n.clientId+")"),n)}),!this.analyticsClients.length)return a.debug("No Google Analytics client(s) were detected.");a.info("Detected the following Google Analytics client(s).",this.analyticsClients)},onInitGA4:function(){var t=[];if(window.dataLayer)for(var e=0;e<window.dataLayer.length;e++)for(var n=0;n<window.dataLayer[e].length;n++)if("string"==typeof window.dataLayer[e][n]&&window.dataLayer[e][n].startsWith("G-")){var s={trackingId:window.dataLayer[e][n],name:window.dataLayer[e][n]};if(this.assignTrackingData(s),t.indexOf(s.trackingId)>-1)return a.debug("Skipping duplicate measurementId: "+s.trackingId),null;t.push(s.trackingId),this.analyticsClients.push(s),a.debug("Found Google Analytics client (name: "+s.name+", measurementId: "+s.trackingId+")")}if(!this.analyticsClients.length)return a.debug("No Google Analytics client(s) were detected.");a.info("Detected the following Google Analytics client(s).",this.analyticsClients)},assignTrackingData:function(t){var e=new Promise(function(e){window.gtag("get",t.trackingId,"session_id",e)}),n=new Promise(function(e){window.gtag("get",t.trackingId,"client_id",e)});Promise.all([e,n]).then(function(e){t.sessionId=e[0],t.clientId=e[1],a.debug("GA4 Tracking Data found. (SessionId: "+e[0]+", ClientId: "+e[1]+")")})},onAscEnabled:function(){this.ascEnabled=!0,this.onInitAsc()},onInitAsc:function(){var t=window.asc_datalayer;if(t)for(var e=0;e<t.measurement_ids.length;e++){var n=t.measurement_ids[e],s={trackingId:n,name:n};this.analyticsClients.some(function(t){return t.trackingId===s.trackingId})||(this.assignTrackingData(s),this.analyticsClients.push(s))}},processEvent:function(t,e,n,s){window.ga&&o.foreach(this.analyticsClients,function(i){if(i.trackingId.startsWith("UA-")){var o=i.name+".send";window.ga(o,"event",t,e,n,s),a.debug("Google Analytics Event",o,t,e,n,s)}}),window.gtag&&(window.gtag("event",e,{event_category:t,event_label:n,value:s}),a.debug("Google Analytics 4 Event",t,e,n,s))},dispose:function(){c.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams),c.getOnFormSubmittedParams.unsubscribe(this.getOnFormSubmittedParams),c.getOnClickActionParams.unsubscribe(this.getOnClickActionParams),r.onAscEnabled.unsubscribe(this.onAscEnabled),r.onChatLaunched.unsubscribe(this.onChatLaunched),r.onSmsLaunched.unsubscribe(this.onSmsLaunched),r.onChatStarted.unsubscribe(this.onChatStarted),r.onChatMissed.unsubscribe(this.onChatMissed),r.onChatEnded.unsubscribe(this.onChatEnded),r.onSmsStarted.unsubscribe(this.onSmsStarted),r.onActivTargetLaunched.unsubscribe(this.onActivTargetLaunched),r.onActivTargetInteraction.unsubscribe(this.onActivTargetInteraction),r.onActivTargetSubmitSuccess.unsubscribe(this.onActivTargetSubmitSuccess),r.onActivTargetSubmitError.unsubscribe(this.onActivTargetSubmitError),r.onPageGroupDetected.unsubscribe(this.onPageGroupDetected),r.onMediaClicked.unsubscribe(this.onMediaClicked),r.onPanelMaximized.unsubscribe(this.onPanelMaximized),r.onPanelMinimized.unsubscribe(this.onPanelMinimized),r.onPanelHidden.unsubscribe(this.onPanelHidden),r.onVideoAssistStart.unsubscribe(this.onVideoAssistStart),r.onVideoAssistEnd.unsubscribe(this.onVideoAssistEnd),r.onLauncherLaunching.unsubscribe(this.onLauncherLaunching),r.onChatRestored.unsubscribe(this.onChatRestored),r.onChatLineReceived.unsubscribe(this.onChatLineReceived),r.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured),r.onChatFormTypeSelected.unsubscribe(this.onChatFormTypeSelected),r.onFormFieldCompleted.unsubscribe(this.onFormFieldCompleted),r.onFormSubmitSuccess.unsubscribe(this.onFormSubmitSuccess),r.onFormSubmitError.unsubscribe(this.onFormSubmitError),r.onActivTargetClosed.unsubscribe(this.onActivTargetClosed),r.onCloseMenuDisplayed.unsubscribe(this.onCloseMenuDisplayed),r.onCloseMenuCleared.unsubscribe(this.onCloseMenuCleared),r.onFormLaunched.unsubscribe(this.onFormLaunched)},onPageGroupDetected:function(t){this.currentPageGroup=l[t]},onChatEnded:function(){this.currentChatId=""},onChatFormTypeSelected:function(t){this.currentChatDepartment=this.mapChatDepartment(t.formType)},getOnChatLaunchedParams:function(t){this.processChatParams(t)},getOnSmsLaunchedParams:function(t){this.processChatParams(t)},getOnFormSubmittedParams:function(t){this.processFormParams(t)},getOnClickActionParams:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{},!t.data.event instanceof PointerEvent||(t.data.target=this.buildButtonTargetFromEvent(t.data.event))},onChatRestored:function(t){this.currentChatId=t.chatId},onChatLaunched:function(t){this.processEvent("ActivEngage","OpenChat","click",1),this.processCtaInteraction(t,m.open,u.chatTool),this.processCommEngagement(t,m.open,d.chat),t.skipPreChatSurvey||this.onFormLaunched({formName:p.preChatSurvey.name,commType:d.chat})},onSmsLaunched:function(t){this.processEvent("ActivEngage","OpenSms","click",1),this.processCtaInteraction(t,m.open,u.chatTool),this.processCommEngagement(t,m.open,d.sms),this.onFormLaunched({formName:p.preSmsSurvey.name,commType:d.sms})},onPanelMaximized:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{},t.fromClick&&this.processCtaInteraction(t,m.open,u.chatTool)},onPanelMinimized:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{},t.fromClick&&this.processCtaInteraction(t,m.close,u.chatTool)},onPanelHidden:function(t){var e=this;if("object"===(void 0===t?"undefined":i(t))){t.data=t.data||{},this.processCtaInteraction(t,m.exit,u.chatTool);Object.keys(this.registeredForms).filter(function(t){return e.registeredForms[t].isPanelForm}).forEach(function(n){var s=e.registeredForms[n];s.isPreChatSurvey&&(e.processCommEngagement(t,m.close,s.commType),e.currentChatId=""),delete e.registeredForms[s.name]})}},onCloseMenuDisplayed:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),this.processCtaInteraction(t,m.close,u.chatTool)},onCloseMenuCleared:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),this.processCtaInteraction(t,m.open,u.chatTool)},onChatStarted:function(t){this.processEvent("ActivEngage","StartChat","click",1),this.currentChatId=t.chatId||"",this.processCommEngagement(t,m.start,d.chat)},onChatMissed:function(t){"object"===(void 0===t?"undefined":i(t))&&this.processCtaInteraction(t,m.open,u.chatTool)},onSmsStarted:function(t){this.processEvent("ActivEngage","StartSms","click",1),this.currentChatId=t.chatId||"",this.processCommEngagement({},m.start,d.sms)},onActivTargetLaunched:function(t){this.processEvent("ActivEngage","ActivTargetImpression","impression",1),this.onFormLaunched(t),this.processSpecialOffer(t,m.start)},onActivTargetInteraction:function(t){this.processSpecialOffer(t,m.engage)},onActivTargetSubmitSuccess:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{},this.processEvent("ActivEngage","ActivTargetSubmit","submit",1),this.onFormSubmitSuccess(t),this.processSpecialOffer(t,m.success)},onActivTargetSubmitError:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{},this.onFormSubmitError(t),this.processSpecialOffer(t,m.error)},onActivTargetClosed:function(t){this.processSpecialOffer(t,m.close),delete this.registeredForms[t.formName]},onFormLaunched:function(t){if("object"!==(void 0===t?"undefined":i(t))&&(t={}),!Object.hasOwn(t,"formName"))return void a.warn("Unable to determine GA4 form name. GA4 events for this form will not be recorded.");this.registerForm(t),this.processFormEngagement(t,m.start)},onFormFieldCompleted:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={});var e=this.registeredForms[t.formName];e&&e.completedFields.indexOf(t.fieldName)<0&&(e.completedFields.push(t.fieldName),t.data=t.data||{},t.data.target={displayText:t.fieldName},this.processFormEngagement(t,m.engage)),e.isPreChatSurvey&&this.processCommEngagement(t,m.engage,e.commType)},onFormSubmitSuccess:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{};var e=this.registeredForms[t.formName];if(e){if(e.isPreChatSurvey)return void this.processCtaInteraction(t,m.start,e.elementType);this.processCtaInteraction(t,m.complete,e.elementType),this.processFormEngagement(t,e.submitAction)}},onFormSubmitError:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),t.data=t.data||{};var e=this.registeredForms[t.formName];e&&(this.processCtaInteraction(t,m.error,e.elementType),this.processFormEngagement(t,m.failed))},onMediaClicked:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),this.processMediaInteraction(t)},onVideoAssistStart:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),this.processVideoCallEngagement(t,m.videoStart)},onVideoAssistEnd:function(t){"object"!==(void 0===t?"undefined":i(t))&&(t={}),this.processVideoCallEngagement(t,m.videoEnd)},onLauncherLaunching:function(t){this.currentChatPosition||this.setCurrentChatPosition(t),this.launcherLoaded||(this.launcherLoaded=!0,this.processCommEngagement(t,m.load,d.chat))},onChatVisitorNameCaptured:function(t){t=t||{},this.onChatLineReceived({sender:"visitor",message:t.name})},onChatLineReceived:function(t){switch(t.data=t.data||{},t.sender){case"visitor":this.processCommEngagement(t,m.engage,d.chat);break;case"operator":switch(t.source){case"OperatorAccelerateMyDeal":case"OperatorSendRevolveApplication":this.processCommEngagement(t,m.sendDeal,d.chat)}}},processSpecialOffer:function(t,e){if(!t)return void a.warn("Unable to process GA4 event: "+h.specialOffer+". Parameter data not found.");var n=this.registeredForms[t.formName];if(!n)return void a.warn("Unable to process GA4 event: "+h.specialOffer+". Offer has not been registered.");t.data=t.data||{},t.data.department=this.mapFormDepartment(n.department),t.data.description=n.description,t.data.formName=n.name,t.data.action=e,this.processAscEvent(h.specialOffer,t)},processFormEngagement:function(t,e){if(!t)return void a.warn("Unable to process GA4 event: "+h.formEngagement+". Parameter data not found.");var n=this.registeredForms[t.formName];if(!n)return void a.warn("Unable to process GA4 event: "+h.formEngagement+". Form has not been registered.");t.data=t.data||{},t.data.target&&(n.submitText=this.processElementText(t.data.target)),t.data.formName=n.name,t.data.department=this.mapFormDepartment(n.department),t.data.submitText=n.submitText,t.data.action=e,this.processAscEvent(h.formEngagement,t)},processCommEngagement:function(t,e,n){if(!t)return void a.warn("Unable to process GA4 event: "+h.commEngagement+". Parameter data not found.");t.data=t.data||{},t.data.commType=n,t.data.action=e,this.processAscEvent(h.commEngagement,t)},processCtaInteraction:function(t,e,n){if(!t)return void a.warn("Unable to process GA4 event: "+h.ctaInteraction+". Parameter data not found.");t.data=t.data||{},t.data.action=e,t.data.elementType=n,this.processAscEvent(h.ctaInteraction,t)},processVideoCallEngagement:function(t,e){if(!t)return void a.warn("Unable to process GA4 event: "+h.videoCallEngagement+". Parameter data not found");t.data=t.data||{},t.data.action=e,this.processAscEvent(h.videoCallEngagement,t)},processMediaInteraction:function(t){if(!t)return void a.warn("Unable to process GA4 event: "+h.mediaInteraction+". Parameter data not found");t.data=t.data||{},this.processAscEvent(h.mediaInteraction,t)},processAscEvent:function(t,e){if(window.gtag&&this.ascEnabled){var n={event_owner:"activengage",page_type:this.getCurrentPageGroup()},s=e.data;switch(t){case h.commEngagement:n=this.buildCommEngagementParams(s,n);break;case h.ctaInteraction:n=this.buildCtaParams(s,n);break;case h.specialOffer:n=this.buildSpecialOfferParams(s,n);break;case h.mediaInteraction:n=this.buildMediaInteractionParams(s,n);break;case h.formEngagement:n=this.buildFormEngagementParams(s,n);break;case h.videoCallEngagement:n=this.buildVideoCallParams(s,n)}a.info("Firing GA4 ASC Event: "+t),window.gtag("event",t,n)}},buildCommEngagementParams:function(t,e){return e.element_position=this.getCurrentChatPosition(),e.affiliation_id=this.getChatId(),e.department=this.getCurrentChatDepartment(),e.comm_status=t.action,e.comm_type=t.commType,e.affiliation="activengage",e},buildVideoCallParams:function(t,e){return e.affiliation_id=this.getChatId(),e.element_position=this.getCurrentChatPosition(),e.department=this.getCurrentChatDepartment(),e.comm_type=d.video,e.comm_status=t.action,e.affiliation="activengage",e},buildFormEngagementParams:function(t,e){return e.department=t.department||"sales",e.form_name=t.formName,e.comm_status=t.action,e.element_text=t.submitText,e.comm_type=d.form,e.form_type="consumer_contact",e},buildMediaInteractionParams:function(t,e){return e.link_url=t.linkUrl,e.event_action_result=t.action,e.media_type=t.mediaType,e.creative_name=t.name,e.affiliation="activengage",e},buildSpecialOfferParams:function(t,e){return e.department=t.department||"sales",e.promotion_name=t.description,e.flow_outcome=t.action,e.product_name=t.formName,e.element_position="popup",e},buildCtaParams:function(t,e){return e.element_text=this.processElementText(t.target),e.element_color=this.processTargetColor(t.target),e.element_type=t.elementType,e.event_action_result=t.action,e.event_action="click",e.element_order=0,e.link_url="",e},getChatId:function(){return this.currentChatId||"N/A"},getCurrentChatDepartment:function(){return this.currentChatDepartment||"sales"},getCurrentChatPosition:function(){return this.currentChatPosition||"bottom_right"},getCurrentPageGroup:function(){return this.currentPageGroup||"custom"},setCurrentChatPosition:function(t){t&&t.position?this.currentChatPosition=t.position.replace(" ","_"):(a.warn("Unable to set GA4 Chat Position. Defaulting to 'bottom_right'"),this.currentChatPosition="bottom_right")},mapFormDepartment:function(t){switch(t){case"serviceAppointment":return"service";case"cs":return"contact";default:return t}},processElementText:function(t){return t&&t.displayText&&"undefined"!==t.displayText?t.displayText:"N/A"},processTargetColor:function(t){return t&&"string"==typeof t.color?t.color:"#ffffff"},mapChatDepartment:function(t){switch(t){case"cs":return"unknown";default:return t}},registerForm:function(t){var e=this.registeredForms[t.formName];if(e)return void a.debug("Form: "+e.name+"already exists.");var n=[g.postChatSurvey.name],s=[p.preChatSurvey.name,p.preSmsSurvey.name];this.registeredForms[t.formName]={name:t.formName,description:t.description,department:t.department,completedFields:[],submitText:"N/A",commType:t.commType,isPreChatSurvey:s.includes(t.formName),isPanelForm:"ActivTarget"!==t.formName,submitAction:t.submitAction||n.includes(t.formName)?m.send:m.crmUpdate,elementType:t.elementType||s.includes(t.formName)?u.chatTool:u.form}},processChatParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);this.processParams(t),t.data.CHAT_ELEMENT_POSITION=this.getCurrentChatPosition()},processFormParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);if(this.processParams(t),t.formName){var e=this.registeredForms[t.formName];e&&(t.data.FORM_NAME=e.name,t.data.CTA_ELEMENT_TEXT=e.submitText,t.data.FORM_DEPARTMENT=e.department)}},processParams:function(t){t.data=t.data||{};for(var e,n,s=0;s<this.analyticsClients.length;s++){var i=this.analyticsClients[s],a="ANALYTICS_GOOGLE_ID_"+s;t.data[a]=i.trackingId,e||(e=i.clientId),n||(n=i.sessionId)}e&&(t.data.ANALYTICS_GOOGLE_CLIENTID=e),n&&(t.data.ANALYTICS_GOOGLE_SESSIONID=n),t.data.ANALYTICS_ASC_ENABLED=this.ascEnabled.toString(),t.data.ANALYTICS_ASC_PAGE_TYPE=this.getCurrentPageGroup()},getHexColorFromElement:function(t){var e=getComputedStyle(t),n=e.getPropertyValue("background-color").match(/\d+/g);if(n){return"#"+n.map(function(t){var e=parseInt(t).toString(16);return 1===e.length?"0"+e:e}).join("").toUpperCase()}return null},buildButtonTargetFromEvent:function(t){var e,n,s=t.target;if(s&&s instanceof EventTarget){var i=s.closest("button");i&&(n=this.getHexColorFromElement(i)),e=s.innerText||(i?i.ariaLabel:"")}return{displayText:e,color:n}}},t.exports=new s},546:function(t,e,n){"use strict";function s(){this.onChatStarted=this.onChatStarted.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.collectParams=this.collectParams.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.dispose=this.dispose.bind(this)}var i=n(2),a=n(4),o=n(1).events,r=n(8).events,c=n(1).callbacks,h=n(7),d=n(3),u=n(26);s.prototype={_account:a.getAccount(),_chatId:null,_firstResponse:null,_chatEnded:!1,_formType:"",_formTypeMap:{sales:"sales",service:"service",parts:"parts",cs:"other"},initialize:function(){return!!(this._account&&this._account.externalAccountIds&&this._account.externalAccountIds.hondadealercode&&Array.isArray(window.dataLayer))&&(i.info("Detected Honda Analytics."),o.onChatStarted.subscribe(this.onChatStarted),o.onChatEnded.subscribe(this.onChatEnded),r.onOperatorEndedChat.subscribe(this.onChatEnded),o.onChatLineReceived.subscribe(this.onChatLineReceived),o.onSmsStarted.subscribe(this.onSmsStarted),o.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),c.getOnChatLaunchedParams.subscribe(this.collectParams),c.getOnSmsLaunchedParams.subscribe(this.collectParams),!0)},dispose:function(){o.onChatStarted.unsubscribe(this.onChatStarted),o.onChatEnded.unsubscribe(this.onChatEnded),r.onOperatorEndedChat.unsubscribe(this.onChatEnded),o.onChatLineReceived.unsubscribe(this.onChatLineReceived),o.onSmsStarted.unsubscribe(this.onSmsStarted),o.onChatFormTypeSelected.unsubscribe(this.onChatFormTypeSelected),c.getOnChatLaunchedParams.unsubscribe(this.collectParams),c.getOnSmsLaunchedParams.unsubscribe(this.collectParams)},collectParams:function(t){var e=d.getQueryStringObj();t.data.ReferrerSite=e.utm_source,t.data.ReferrerType=e.utm_medium,t.data.CampaignID=e.utm_campaign,t.data.AdGroupID=e.ads_adgroup,t.data.AdID=e.ads_adid,t.data.DigitalAdProvider=e.ads_digadprovider,t.data.HondaDealerCode=this._account.externalAccountIds.hondadealercode},getHondaDefaultParams:function(){return{event:"mps_chat","jdpa.honda.dealerid":this._account.externalAccountIds.hondadealercode,"jdpa.honda.providerid":"ActivEngage","jdpa.honda.chat_category":this.getFormType(),"jdpa.honda.content_group":"mps_chat","jdpa.honda.chat_device":this.getDevice(),"jdpa.honda.chat_type":"human","jdpa.honda.chat_source":"Dealer Website"}},processEvent:function(t){t&&(i.info("Pushing Honda Event: ",t),window.dataLayer.push(t))},getFormType:function(){return this._formType&&this._formTypeMap[this._formType]?this._formTypeMap[this._formType]:"sales"},getDevice:function(){return h.getEnvironment().mobile?h.isScreenSizeAtMost(768)?"mobile":"tablet":"desktop"},onChatFormTypeSelected:function(t){t&&t.formType&&(this._formType=t.formType)},onChatLineReceived:function(){this._firstResponse||(this._firstResponse=this.getCurrentDateTime())},onChatStarted:function(){var t=this.getHondaDefaultParams();t["jdpa.honda.chat_action"]="start",t["jdpa.honda.chat_start"]=this.getCurrentDateTime(),t["jdpa.honda.chat_format"]="web",t["jdpa.honda.chat_id"]=u.getChatId(),this.processEvent(t)},onSmsStarted:function(t){var e=this.getHondaDefaultParams();e["jdpa.honda.chat_action"]="start",e["jdpa.honda.chat_start"]=this.getCurrentDateTime(),e["jdpa.honda.chat_format"]="sms",e["jdpa.honda.chat_id"]=t.chatId,this.processEvent(e)},onChatEnded:function(){if(!this._chatEnded){var t=this.getHondaDefaultParams();t["jdpa.honda.chat_action"]="end",t["jdpa.honda.chat_first_response"]=this._firstResponse,t["jdpa.honda.chat_chat_end"]=this.getCurrentDateTime(),t["jdpa.honda.chat_format"]="web",this.processEvent(t),this._chatEnded=!0}},getCurrentDateTime:function(){return d.formatDate(new Date)}},t.exports=new s},547:function(t,e,n){"use strict";function s(){this.onChatStarted=this.onChatStarted.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onVisitorLeftChat=this.onVisitorLeftChat.bind(this),this.onChatAnswered=this.onChatAnswered.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.pushGlobalVariables=this.pushGlobalVariables.bind(this)}var i=n(2),a=n(4),o=n(1).events,r=n(8).events;s.prototype={_account:a.getAccount(),_chatId:null,_firstResponseDatetime:null,_chatEnded:!1,_formType:"",_visitorLines:0,_operatorResponses:0,_lastVisitorResponseTimestamp:null,_responseTimes:[],initialize:function(){return!!(this._account&&this._account.externalAccountIds&&this._account.externalAccountIds.hyundaidealercode&&Array.isArray(window.dataLayer))&&(i.info("Detected Hyundai Analytics."),o.onChatStarted.subscribe(this.onChatStarted),o.onChatEnded.subscribe(this.onChatEnded),r.onOperatorEndedChat.subscribe(this.onChatEnded),o.onChatLineReceived.subscribe(this.onChatLineReceived),o.onSmsStarted.subscribe(this.onSmsStarted),o.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),r.onVisitorLeftChat.subscribe(this.onVisitorLeftChat),o.onChatAnswered.subscribe(this.onChatAnswered),this.pushGlobalVariables(),!0)},dispose:function(){o.onChatStarted.unsubscribe(this.onChatStarted),o.onChatEnded.unsubscribe(this.onChatEnded),r.onOperatorEndedChat.unsubscribe(this.onChatEnded),o.onChatLineReceived.unsubscribe(this.onChatLineReceived),o.onSmsStarted.unsubscribe(this.onSmsStarted),o.onChatFormTypeSelected.unsubscribe(this.onChatFormTypeSelected),r.onVisitorLeftChat.unsubscribe(this.onVisitorLeftChat),o.onChatAnswered.unsubscribe(this.onChatAnswered)},pushGlobalVariables:function(){var t={chat_provider:"ActivEngage"};this.processEvent(t)},processEvent:function(t){t&&(i.info("Pushing Hyundai Event: ",t),window.dataLayer.push(t))},getFormType:function(){return this._formType&&this._formType&&"sales"!=this._formType?"support":"sales"},onChatFormTypeSelected:function(t){t&&t.formType&&(this._formType=t.formType)},onChatLineReceived:function(t){var e=new Date;t.timestamp&&(e=Date.parse(t.timestamp)),"operator"==t.sender?(this._operatorResponses+=1,this._lastVisitorResponseTimestamp&&(this._responseTimes.push(Math.abs(e-this._lastVisitorResponseTimestamp)),this._lastVisitorResponseTimestamp=null)):"visitor"==t.sender&&(this._visitorLines+=1,this._lastVisitorResponseTimestamp=e)},onChatStarted:function(){var t={event:"chat_start",custom_timestamp:this.getUnixEpochDateTime()};this.processEvent(t)},onSmsStarted:function(t){var e={event:"chat_start",custom_timestamp:this.getUnixEpochDateTime()};this.processEvent(e)},onChatEnded:function(){if(this.processEvent(t),!this._chatEnded){if(this._visitorLines<=1){var t={event:"user_abandonment"};this.processEvent(t)}else{var t={event:"chat_end",custom_timestamp:this.getUnixEpochDateTime(),chat_duration:this.getChatDuration(),chat_turns_questions:this._visitorLines,chat_turns_responses:this._operatorResponses,average_responsetime:this.getAverageResponseTime(),chat_topics:this.getFormType(),chat_type:"standard"};this.processEvent(t)}this._chatEnded=!0}},onVisitorLeftChat:function(){if(this._visitorLines<=1){var t={event:"user_abandonment"};this.processEvent(t)}},onChatAnswered:function(){this._firstResponseDatetime=new Date;var t={event:"chat_connected_to_agent"};this.processEvent(t)},getUnixEpochDateTime:function(){var t=new Date,e=t.getTime();return Math.floor(e/1e3)},getChatDuration:function(){if(this._firstResponseDatetime){var t=new Date-this._firstResponseDatetime;return Math.floor(t/1e3)}return 0},getAverageResponseTime:function(){for(var t=0,e=this._responseTimes,n=0;n<e.length;n++)t+=e[n];var s=t/e.length;return 0!=s?Math.floor(s/1e3):0}},t.exports=new s},548:function(t,e,n){"use strict";t.exports={activEngage:n(540),googleAnalytics:n(545),fcaMerkleAnalytics:n(543),gmAdobeAnalytics:n(544),cdkAnalytics:n(542),autonationAnalytics:n(541),tealiumAnalytics:n(552),shiftDigitalAnalytics:n(551),pixallCoxAnalytics:n(550),hondaAnalytics:n(546),orbeeAnalytics:n(549),hyundaiAnalytics:n(547)}},549:function(t,e,n){"use strict";function s(){this.collectOrbeeTokens=this.collectOrbeeTokens.bind(this),this.setDefaultTrackingValues=this.setDefaultTrackingValues.bind(this),this.onPageGroupDetected=this.onPageGroupDetected.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.onChatLaunched=this.onChatLaunched.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onActivTargetLaunched=this.onActivTargetLaunched.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.processStartEvent=this.processStartEvent.bind(this),this.processLaunchEvent=this.processLaunchEvent.bind(this),this.processActivTargetLaunchEvent=this.processActivTargetLaunchEvent.bind(this),this.processParams=this.processParams.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=n(3),r=n(1).events,c=n(1).callbacks,h=n(538);s.prototype={trackingTokens:[],trackingData:{currentPageGroup:null,currentVisitorName:null,currentDepartment:null},initialize:function(){return window.orb?(this.collectOrbeeTokens(),this.trackingTokens.length?(this.setDefaultTrackingValues(),a.info("Orbee Analytics Detected: "+this.trackingTokens.join(", ")),c.getOnChatLaunchedParams.subscribe(this.processParams),c.getOnSmsLaunchedParams.subscribe(this.processParams),r.onChatLaunched.subscribe(this.onChatLaunched),r.onSmsLaunched.subscribe(this.onSmsLaunched),r.onChatStarted.subscribe(this.onChatStarted),r.onSmsStarted.subscribe(this.onSmsStarted),r.onActivTargetLaunched.subscribe(this.onActivTargetLaunched),r.onChatLineReceived.subscribe(this.onChatLineReceived),r.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),r.onPageGroupDetected.subscribe(this.onPageGroupDetected),r.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),!0):a.debug("Orbee Analytics detected, but no available tokens. Events will not be tracked.")):a.debug("Orbee Analytics not detected")},collectOrbeeTokens:function(){var t=window.orb.bootloader;if(t&&t.tokens)for(var e=Object.keys(t.tokens),n=0;n<e.length;n++)this.trackingTokens.indexOf(e[n])>-1||this.trackingTokens.push(e[n])},setDefaultTrackingValues:function(){this.trackingData.currentVisitorName=h.defaults.visitorName,this.trackingData.currentDepartment=h.defaults.department},onChatLaunched:function(){this.processLaunchEvent(h.channels.chat)},onSmsLaunched:function(){this.processLaunchEvent(h.channels.sms)},onChatStarted:function(t){t&&t.visitorName&&(this.trackingData.currentVisitorName=t.visitorName),this.processStartEvent(h.channels.chat)},onSmsStarted:function(t){t&&t.visitorName&&(this.trackingData.currentVisitorName=t.visitorName),this.processStartEvent(h.channels.sms)},onActivTargetLaunched:function(t){var e=t.department||h.defaults.department,n=t.description||h.defaults.activTargetDescription;this.processActivTargetLaunchEvent(e,n)},onChatVisitorNameCaptured:function(t){t=t||{},this.onChatLineReceived({sender:"visitor",message:t.name})},onChatLineReceived:function(t){t&&t.sender&&"operator"===t.sender||this.processVisitorMessageEvent()},processStartEvent:function(t){var e;switch(t){case h.channels.chat:e=h.eventNames.chatStart;break;case h.channels.sms:e=h.eventNames.smsStart;break;default:return a.debug("Orbee: Unknown channel type: "+t+". Event will not be tracked.")}e=e.replace(/{VISITOR}/,this.trackingData.currentVisitorName),this.trackingData.currentPageGroup&&"other"!==this.trackingData.currentPageGroup&&(e+=" on "+h.pageGroupStrings[this.trackingData.currentPageGroup]);var n=this.getDefaultEventProperties();n.channel=t,n.department=this.trackingData.currentDepartment,n.id=h.eventIds.chatStarted,this.trackEvent(e,n)},processLaunchEvent:function(t){var e;switch(t){case h.channels.chat:e=h.eventNames.chatLaunch;break;case h.channels.sms:e=h.eventNames.smsLaunch;break;default:return a.debug("Orbee: Unknown channel type: "+t+". Event will not be tracked.")}this.trackingData.currentPageGroup&&"other"!==this.trackingData.currentPageGroup&&(e+=" on "+h.pageGroupStrings[this.trackingData.currentPageGroup]);var n=this.getDefaultEventProperties();n.channel=t,n.id=h.eventIds.chatOpened,this.trackEvent(e,n)},processActivTargetLaunchEvent:function(t,e){var n=h.eventNames.activTargetImpression,s=this.getDefaultEventProperties();s.department=t,s.description=e,s.id=h.eventIds.activTargetImpression,this.trackEvent(n,s)},processVisitorMessageEvent:function(){var t=h.eventNames.visitorMessage;t=t.replace(/{VISITOR}/,this.trackingData.currentVisitorName);var e=this.getDefaultEventProperties();e.department=this.trackingData.currentDepartment,e.channel=h.channels.chat,e.id=h.eventIds.chatEngagement,this.trackEvent(t,e)},trackEvent:function(t,e){this.trackingTokens.length&&o.foreach(this.trackingTokens,function(n){e.token=n,window.orb("track",t,e),a.info("Orbee Event Tracked: "+e.id)})},processParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);t.data=t.data||{};for(var e=0;e<this.trackingTokens.length;e++){var n=this.trackingTokens[e],s="ANALYTICS_ORBEE_TOKEN_"+e;t.data[s]=n}},getDefaultEventProperties:function(){return{provider:h.provider}},onPageGroupDetected:function(t){this.trackingData.currentPageGroup=t},onChatFormTypeSelected:function(t){this.trackingData.currentDepartment=h.departments[t.formType]||h.defaults.department},dispose:function(){c.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams),r.onChatLaunched.unsubscribe(this.onChatLaunched),r.onSmsLaunched.unsubscribe(this.onSmsLaunched),r.onChatStarted.unsubscribe(this.onChatStarted),r.onSmsStarted.unsubscribe(this.onSmsStarted),r.onActivTargetLaunched.unsubscribe(this.onActivTargetLaunched),r.onChatLineReceived.unsubscribe(this.onChatLineReceived),r.onPageGroupDetected.unsubscribe(this.onPageGroupDetected),r.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),r.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured)}},t.exports=new s},550:function(t,e,n){"use strict";function s(){this.onChatLaunched=this.onChatLaunched.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),this.dispose=this.dispose.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this)}var i=n(2),a=n(3),o=n(1).events,r={events:{launch:"launch",start:"start"},channels:{chat:"chat",sms:"text"},coxElements:["plainbutton"]},c={push:function(t,e,n,s){void 0!==window.chatTextEventCallback?t!=r.events.launch||r.coxElements.includes(n)||window.chatTextEventCallback(e):window._pxam.push(s)}};s.prototype={consumerLineCount:0,provider:null,initialize:function(){return void 0===window._pxam?i.debug("Pixall Analytics was not detected"):(this.provider=c,o.onChatLaunched.subscribe(this.onChatLaunched),o.onSmsLaunched.subscribe(this.onSmsLaunched),o.onChatStarted.subscribe(this.onChatStarted),o.onSmsStarted.subscribe(this.onSmsStarted),o.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),i.info("Detected Pixall Analytics."),!0)},dispose:function(){o.onChatLaunched.unsubscribe(this.onChatLaunched),o.onSmsLaunched.unsubscribe(this.onSmsLaunched),o.onChatStarted.unsubscribe(this.onChatStarted),o.onSmsStarted.unsubscribe(this.onSmsStarted),o.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured)},processAssistEvent:function(t,e){this.provider.push(r.events.launch,t,e,{type:"event",eventType:"assist",eventSource:"sale",assistChannel:"Website",assistProduct:"Chat",assistSubchannel:"ActivEngage"})},processGoalEvent:function(t,e){this.provider.push(r.events.start,t,"window",{type:"event",eventType:"goal",eventSource:"sale",formEventId:a.guid(),feature:"ActivEngage Chat",goal:e})},onChatLaunched:function(t){this.processAssistEvent(r.channels.chat,t.source)},onSmsLaunched:function(t){this.processAssistEvent(r.channels.sms,t.source)},onChatStarted:function(){o.onChatLineReceived.subscribe(this.onChatLineReceived)},onChatVisitorNameCaptured:function(t){t=t||{},this.onChatLineReceived({sender:"visitor",message:t.name})},onChatLineReceived:function(t){"operator"!=t.sender&&(this.consumerLineCount+=1,this.consumerLineCount>=3&&(this.processGoalEvent(r.channels.chat,"ChatStarted"),o.onChatLineReceived.unsubscribe(this.onChatLineReceived)))},onSmsStarted:function(){this.processGoalEvent(r.channels.sms,"StartSms")}},t.exports=new s},551:function(t,e,n){"use strict";function s(){this.onChatLaunched=this.onChatLaunched.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onChatClosed=this.onChatClosed.bind(this),this.onSessionIdAvailable=this.onSessionIdAvailable.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onShiftSessionIdAvailable=this.onShiftSessionIdAvailable.bind(this),this.dispose=this.dispose.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=(n(3),n(4)),r=n(1).events,c=(n(1).commands,n(1).callbacks);s.prototype={providerId:"ActivEngage",context:{},initialize:function(){if(!window.sd||"function"===!i(window.sd))return void a.debug("Shift Digital Analytics was not detected.");a.debug("Successfully detected Shift Digital Analytics."),r.onChatLaunched.subscribe(this.onChatLaunched),r.onSmsLaunched.subscribe(this.onSmsLaunched),r.onSessionIdAvailable.subscribe(this.onSessionIdAvailable),r.onChatEnded.subscribe(this.onChatClosed),r.onChatLineReceived.subscribe(this.onChatLineReceived),r.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),r.onSmsStarted.subscribe(this.onSmsStarted),c.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),sd("getSessionId",this.onShiftSessionIdAvailable);var t=o.getAccount()||{};return this.providerId="gm"===t.tenant?"DealerChatbyAE":"ActivEngage",!0},processEvent:function(t,e){if(!this.context.sessionId)return a.error("ActivEngage overwatch provider Error. SessionId is not available for Shift Digital event delivery.");sd("dataLayer",{chatProfitCenter:"sales",chatType:e,chatSessionId:this.context.sessionId,chatProvider:this.providerId,events:t}),sd("send")},dispose:function(){r.onChatLaunched.unsubscribe(this.onChatLaunched),r.onSmsLaunched.unsubscribe(this.onSmsLaunched),r.onSessionIdAvailable.unsubscribe(this.onSessionIdAvailable),r.onChatEnded.unsubscribe(this.onChatClosed),r.onChatLineReceived.unsubscribe(this.onChatLineReceived),r.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured),r.onSmsStarted.unsubscribe(this.onSmsStarted),c.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams)},onSessionIdAvailable:function(t){this.context.sessionId=t.sessionId,this.processEvent("chatImpression","chat")},onShiftSessionIdAvailable:function(t){this.context.shiftSessionId=t},onChatLaunched:function(){this.processEvent("chatClick","chat")},onSmsLaunched:function(){this.processEvent("chatClick","text")},onSmsStarted:function(){if(!this.context.sessionId)return a.error("ActivEngage overwatch provider Error. SessionId is not available for Shift Digital event delivery.");sd("dataLayer",{chatProfitCenter:"sales",chatType:"text",chatSessionId:this.context.sessionId,chatProvider:this.providerId,chatMessageType:"user",chatMessageContent:"",events:"chatUserMessage"}),sd("send")},onChatClosed:function(){this.processEvent("chatClosed","chat")},onChatVisitorNameCaptured:function(t){t=t||{},this.onChatLineReceived({sender:"visitor",message:t.name})},onChatLineReceived:function(t){if(!this.context.sessionId)return a.error("ActivEngage overwatch provider Error. SessionId is not available for Shift Digital event delivery.");sd("dataLayer",{chatProfitCenter:"sales",chatType:"chat",chatSessionId:this.context.sessionId,chatProvider:this.providerId,chatMessageType:"operator"==t.sender?"agent":"user",chatMessageContent:"",events:"chatUserMessage"}),sd("send")},getOnChatLaunchedParams:function(t){this.processParams(t)},getOnSmsLaunchedParams:function(t){this.processParams(t)},processParams:function(t){t.data=t.data||{},t.data.analytics_shiftdigital_id=this.context.sessionId,t.data.analytics_shiftdigital_sessionid=this.context.shiftSessionId}},t.exports=new s},552:function(t,e,n){"use strict";function s(){this.dispose=this.dispose.bind(this)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2),o=n(3),r=n(1).callbacks,c={cookies:{kenshooid:"kenshooid"}};s.prototype={kenshooId:"",queryObject:"",initialize:function(){if(window.utag&&window.utag.data)return a.debug("Tealium tag detected."),this.queryObject=o.getQueryStringObj(),this.setKenshooId(),this.kenshooId&&a.debug("KenshooID detected : "+this.kenshooId),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),r.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),!0},setKenshooId:function(){var t="";this.queryObject.hasOwnProperty("k_clickid")&&this.queryObject.k_clickid&&(t=this.queryObject.k_clickid),t?o.setCookie(c.cookies.kenshooid,t,(new Date).addHours(1)):t=o.getCookie(c.cookies.kenshooid)||"",this.kenshooId=t},getOnChatLaunchedParams:function(t){this.processParams(t)},getOnSmsLaunchedParams:function(t){this.processParams(t)},processParams:function(t){if(!t||"object"!=(void 0===t?"undefined":i(t)))return a.error('Expected argument "params" to be an object',t);t.data=t.data||{},this.kenshooId&&(t.data.kenshooclickid=this.kenshooId)},dispose:function(){r.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams)}},t.exports=new s},553:function(t,e,n){"use strict";function s(){this._baseUrl=""}var i=n(2),a=n(33),o=n(4),r={application:"pageview",target:"notavailable",action:"notavailable",event:"notavailable"};s.prototype={setBaseUrl:function(t){if(!t)return void i.error("PageAction BaseUrl not set to valid value",t);this._baseUrl=t,this._baseUrl.match(/\/$/)||(this._baseUrl=this._baseUrl+"/")},add:function(t){return this._processAction(t),this._get("add",t)},_get:function(t,e){return this._baseUrl?(i.debug("New POST request:",t,e),a.get(this._baseUrl+t,e).fail(function(n){i.error("POST request error:",t,n,e)})):void i.error("PageActionError: Attempting to call page action service prior to baseUrl being set.",this._baseUrl)},_processAction:function(t){String.isNullOrEmpty(t.application)&&(t.application=r.application),String.isNullOrEmpty(t.target)&&(i.warn('ActionEvent "target" is missing.'),t.target=r.target),String.isNullOrEmpty(t.action)&&(i.warn('ActionEvent "action" is missing.'),t.action=r.action),String.isNullOrEmpty(t.event)&&(i.warn('ActionEvent "event" is missing.'),t.event=r.event);var e=o.getAccount(),n=o.getSession();t.siteId=e.siteId,t.accountId=e.accountId,t.visitorId=n.visitorId,t.sessionId=n.sessionId,t.appVersion=o.constants.version}},t.exports=new s},68:function(t,e,n){"use strict";t.exports={eventNames:{ctaInteraction:"asc_cta_interaction",mediaInteraction:"asc_media_interaction",specialOffer:"asc_special_offer",formEngagement:"asc_form_engagement",videoCallEngagement:"asc_video_call_engagement",commEngagement:"asc_comm_engagement"},elementTypes:{chatTool:"chat_tool",popup:"pop-up",form:"form"},commTypes:{chat:"chat",sms:"sms",video:"video",form:"form"},pageTypes:{home:"home",vdp:"item",ddp:"item","ddp-search":"itemlist","vdp-search":"itemlist",service:"service",parts:"parts",specials:"commercial",finance:"finance",retailing:"finance","trade-in":"trade",other:"custom"},actions:{start:"start",open:"open",close:"close",load:"load",success:"success",error:"error",failed:"failed",crmUpdate:"crm_update",engage:"engage",videoStart:"video_start",videoEnd:"video_end",sendDeal:"send_deal",complete:"complete",exit:"exit",send:"send"},surveyTypes:{preChatSurveys:{preChatSurvey:{name:"PreChatSurvey",commType:"chat"},preSmsSurvey:{name:"PreSmsSurvey",commType:"sms"}},postChatSurveys:{postChatSurvey:{name:"PostChatSurvey",commType:null}}}}},8:function(t,e,n){"use strict";var s=n(66),i=n(36);t.exports={commands:{launchChat:new s,endChat:new s,redirect:new s,showOfflineMessage:new s,minimizePanel:new s,maximizePanel:new s,closePanel:new s,clearPanelMenu:new s,updatePanelNotifications:new s,showInventoryView:new s,showAutoPartsKitView:new s,showAcceleRaterView:new s,showMyDriveSlideOut:new s,showVideoAssistSettings:new s,hideVideoAssistSettings:new s,showVideoAssist:new s,updateVideoAssistDevices:new s,reloadVideoAssistDevices:new s,leaveVideoAssistVisitor:new s,operatorVideoAssistEnded:new s,registerVideoAssistData:new s,pauseVideoAssistVisitor:new s,resumeVideoAssistVisitor:new s},events:{onPageChanged:new i,onRoutesAvailable:new i({storageType:i.storageType.storePermanently}),onChatLaunched:new i,onChatInitialLinesAdded:new i,onChatPendingLineAddded:new i,onChatLineAdded:new i,onChatLineUpdated:new i,onChatAnswered:new i,onChatClosed:new i,onChatStageChanged:new i,operatorStarred:new i,onRevolveSent:new i,onLineFromMessageComponent:new i,onPanelMinimized:new i,onPanelMaximized:new i,onLanguageChange:new i,onOperatorJoined:new i,onOperatorStartedTyping:new i,onOperatorStoppedTyping:new i,onOperatorLeftChat:new i,onOperatorEndedChat:new i,onVisitorBlocked:new i,onVisitorLeftChat:new i,onVisitorNamedChanged:new i,onStillTherePing:new i,onIntentRequested:new i,onIntentPrepared:new i,operatorVideoAssistPause:new i,operatorVideoAssistResume:new i,onHubConnected:new i,onHubReconnecting:new i,onHubReconnected:new i,onHubDisconnected:new i,onHubError:new i}}}});