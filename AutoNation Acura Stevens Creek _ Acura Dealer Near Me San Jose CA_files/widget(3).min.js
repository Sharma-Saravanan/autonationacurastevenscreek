"use strict";!function(e,t){var n=["event","element","elementCTA","action","result","widgetName","widgetId","widgetState","fieldValue","formId","formEventId","value","sourceData"],a=function(e){return n.forEach(function(t){"undefined"==typeof e[t]&&(e[t]=void 0)}),e},i=function(e,t){var n=[];n.push(t.widgetName),n.push(t.eventName),n.push(t.data),n.push(t.value),n.push(!!t.noninteraction),t.hitCallback&&n.push(t.hitCallback),t.dimensionIndex&&t.dimensionValue&&(n.push("dimension"+t.dimensionIndex),n.push(t.dimensionValue)),"undefined"!=typeof ga&&ga(function(){for(var a=t.trackerIds?t.trackerIds.join(","):void 0,i=_.uniq(ga.getAll(),function(e){return e.get("trackingId")}),o=[],d=0;d<i.length;++d){var c=i[d],u=c.get("name"),s=c.get("trackingId");a&&a.indexOf(s)>-1?o.push(u):void 0===a&&o.push(u)}for(var d=0;d<o.length;d++){var g=o[d],l="["+ga.getByName(g).get("trackingId")+"] _"+e.type+"()",v="dimension"+t.dimensionIndex,f={hitType:"event",eventCategory:t.widgetName,eventAction:t.eventName,eventLabel:t.data,eventValue:t.value,nonInteraction:t.noninteraction||void 0,hitCallback:t.hitCallback||void 0};t.dimensionIndex&&t.dimensionValue&&(f[v]=t.dimensionValue),ga(g+".send",f),r(l,n)}})},o=function(){e(document).on("trackEvent",function(e,n,o){if(n&&"widgetUserEvent"===n.event){var r=a(n);if(t.pushToGtmDataLayer(r,o),!window.DDC.thirdPartyGoogleAnalyticsTrackingIds||!window.DDC.thirdPartyGoogleAnalyticsTrackingIds.length)return;if("blurred"===r.action||"focused"===r.action)return;var d={widgetName:window.DDC.dataLayer.page.pageInfo.pageName+" > "+r.widgetName+" > "+r.widgetId,eventName:r.element+" "+r.action,data:r.result,value:void 0,noninteraction:r.nonInteractive||void 0,trackerIds:window.DDC.thirdPartyGoogleAnalyticsTrackingIds};i(e,d)}else n&&"thirdPartyUserEvent"===n.event&&"undefined"!=typeof n.product&&"undefined"!=typeof n.element&&"undefined"!=typeof n.action&&"undefined"!=typeof n.result?(t.pushToGtmDataLayer(n),i(e,{widgetName:"Third Party Integration > "+n.product,eventName:n.step+" > "+n.element+" "+n.action,data:n.result,value:void 0,noninteraction:!0,trackerIds:window.DDC.thirdPartyGoogleAnalyticsTrackingIds})):n&&n.widgetName&&n.eventName&&i(e,n)}),e(document).on("trackSocialEvent",function(e,t){if(t&&t.network&&t.socialAction){var n=[];n.push(t.network),n.push(t.socialAction),n.push(t.opt_target),n.push(t.opt_pagePath),"undefined"!=typeof ga&&ga(function(){for(var a=ga.getAll(),i=0;i<a.length;++i){var o=a[i],d=o.get("name"),c="["+o.get("trackingId")+"] _"+e.type+"()";ga(d+".send",{hitType:"social",socialNetwork:t.network,socialAction:t.socialAction,socialTarget:t.opt_target,page:t.opt_pagePath}),r(c,n)}})}}),window.addEventListener("message",function(t){t.data&&t.data.hasOwnProperty("trackEvent")&&e(document).trigger("trackEvent",t.data.trackEvent)})},r=function(e,n){for(var a=[e],i=0;i<n.length;i++)a.push(n[i]);t.log(a)},d=function(){var t=e("body"),n=t.find(".consumer-privacy-banner");if(n.length){var a="DDC.AllowUserData",i=window.localStorage.getItem(a),o=function(){n.find(":tabbable").attr("tabindex","-1")};if("true"!==i){var r=n.find(".consumer-privacy-banner-button");r.length&&(t.prepend(n),r.on("click",function(e){e.preventDefault(),n.removeClass("in").removeClass("no-animation").attr("aria-hidden","true"),o(),window.localStorage.setItem(a,"true")}))}}};e(function(){o(),window.DDC=window.DDC||{},window.DDC.tracking=window.DDC.tracking||{},window.DDC.tracking.ready=!0,e.publish("ddc-event-tracking-ready"),t.WidgetData["tracking-ddc"].showPrivacyBanner&&!t.WidgetData["tracking-ddc"].inlinePrivacyBanner&&d()})}(jQuery,window.DDC),function(){var e=function(){var e="KBB_Trade-In_Advisor_Event";window.addEventListener("message",function(t){t.data&&t.data.hasOwnProperty(e)&&$(document).trigger("trackEvent",{event:"thirdPartyUserEvent",product:e,step:t.data[e].event,element:"page",action:"impression",result:"Displayed trade-in report"})})};$(document).ready(function(){e()})}();