!function(){var t=$("#ddc-clickmap-img-click"),i=("true"===DDC.getUrlParams()._debugClickmap,window.DDC.client.isMobile?0:1),e={click:0===i?"tap.ddclickmap":"mousedown.ddclickmap"},a={content:"[data-page-body]"},o=$(window),d=function(){return window.DDC&&window.DDC.Widgets&&window.DDC.Widgets.DDCClickmap&&window.DDC.Widgets.DDCClickmap.url&&""!==window.DDC.Widgets.DDCClickmap.url},n=function(t,e){if(d()){var o=$(a.content);if(0!=o.size()){var n,r,l=o.width(),c=o.offset().left,g=o.offset().top,p="{clickmapUrl}/click.gif?siteid={siteId}&type={type}&alias={alias}&widgetid={widgetId}&x={x}&y={y}&width={width}&height={height}",w=0,h=0,f=function(t){var i,e=$(t.target).closest("[data-widget-id]");return e.length>0&&e.attr("data-widget-id")?i=e.attr("data-widget-id"):0===e.length&&$(t.target).closest("#ddc-slidein-panel-primary-navigation").size()>0?(e=$(t.target).closest("#ddc-slidein-panel-primary-navigation"),i="template-navigation1"):i="pageV2",{widget:e,widgetId:i}},D=f(t),u=function(t,i){var e=void 0!==i&&void 0!==i.x?i.x:t.originalEvent.pageX,a=void 0!==i&&void 0!==i.y?i.y:t.originalEvent.pageY;return(void 0===e||void 0===a)&&(e=t.pageX,a=t.pageY),{x:e,y:a}},m=u(t,e);if(D.widget.length>0){var C=D.widget.outerWidth(),v=D.widget.outerHeight(),k=Math.floor(D.widget.offset().top),y=Math.floor(D.widget.offset().left);w=Math.floor(m.x-y),h=Math.floor(m.y-k),n=Math.floor(C),r=Math.floor(v)}else w=Math.floor(m.x-c-l/2),h=Math.floor(m.y-g),n=l,r=0;var I=window.DDC.Widgets.DDCClickmap.newUrl?window.DDC.Widgets.DDCClickmap.newUrl:window.DDC.Widgets.DDCClickmap.url,M=p.replace("{clickmapUrl}",I).replace("{siteId}",window.DDC.siteSettings.siteId).replace("{type}",i).replace("{alias}",window.DDC.siteSettings.pageAlias).replace("{widgetId}",D.widgetId).replace("{x}",w).replace("{y}",h).replace("{width}",n).replace("{height}",r);s.add(M)}}},s={ready:!1,store:sessionStorage||{getItem:$.noop,setItem:$.noop},storageKey:"ddc-clickmap-queue",load:function(){var t=this.store.getItem(this.storageKey);return t?t.split(","):[]},save:function(){this.store.setItem(this.storageKey,this.items.join(","))},add:function(t){t&&(this.items.push(t),this.process())},process:function(){if(this.ready)for(;this.items.length>0;){var i=this.items[0];if(i&&t.attr("src")!==i)return this.ready=!1,void t.attr("src",i);this.items.shift()}},kick:function(){this.ready=!0,this.process()},init:function(){this.items=this.load();var i=this;o.on("load",function(){i.kick()}),t.on("load",function(){i.kick()}),o.unload(function(){i.save()})}};s.init(),$("body").on(e.click,function(t,i){n(t,i)})}();